import{j as e}from"./vendor-ui-B2jkoGl9.js";import{L as A,j as X,f as Oe,k as fe,h as Ie,B as ge,g as Re,H as De,l as Me,m as Ae,n as Ee,P as Te,o as Le,U as Fe,p as V,X as q,q as Be,r as $e,S as qe,s as he,t as W,u as _e,T as Ge,v as Ve,w as Ue}from"./vendor-other-WMI3Kuz0.js";import{a as M,t as S}from"./index-CACZRHjw.js";import{a as t}from"./vendor-react-Cc-oBOCu.js";import"./vendor-recharts-LMBWezzC.js";function Ke({user:s,onLogout:l,onJoinClick:a,address:r,isLocating:i,onRequestLocation:m}){return e.jsx("nav",{className:"sticky top-0 z-50 w-full border-b border-slate-100/50 bg-white/70 px-4 py-3 backdrop-blur-xl sm:px-6 sm:py-4",children:e.jsxs("div",{className:"mx-auto flex max-w-6xl items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-xl bg-emerald-600 text-lg font-black text-white shadow-lg shadow-emerald-100 sm:h-10 sm:w-10 sm:rounded-2xl sm:text-xl",children:"R"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-lg leading-none font-black tracking-tighter sm:text-xl",children:["RAMZAN",e.jsx("span",{className:"text-emerald-600",children:"IA"})]}),e.jsx("button",{onClick:m,className:"mt-0.5 flex items-center gap-1 text-[9px] font-bold tracking-wide text-slate-400 transition-colors hover:text-emerald-600",children:i?e.jsxs(e.Fragment,{children:[e.jsx(A,{size:8,className:"animate-spin"}),e.jsx("span",{children:"Locating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{size:8}),e.jsx("span",{className:"max-w-[120px] truncate sm:max-w-[180px]",children:(r==null?void 0:r.city)||(r==null?void 0:r.area)||"Set Location"})]})})]})]}),e.jsx("div",{className:"flex items-center gap-3 sm:gap-4",children:s?e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsxs("div",{className:"hidden text-right sm:block",children:[e.jsx("p",{className:"text-xs font-black text-slate-900",children:s.name}),e.jsx("p",{className:"text-[10px] font-bold text-emerald-600 uppercase",children:s.role})]}),e.jsx("button",{onClick:l,className:"flex h-9 w-9 items-center justify-center rounded-xl border border-slate-200 bg-slate-50 text-slate-400 transition-all hover:text-red-500 sm:h-10 sm:w-10 sm:rounded-2xl","aria-label":"Logout",children:e.jsx(Oe,{size:16,className:"sm:h-[18px] sm:w-[18px]"})})]}):e.jsxs("button",{onClick:a,className:"flex items-center justify-center gap-1.5 rounded-xl bg-emerald-600 px-4 py-2 text-xs font-bold text-white shadow-lg shadow-emerald-100 transition-all hover:bg-emerald-700 active:scale-95 sm:gap-2 sm:rounded-2xl sm:px-5 sm:text-sm",children:[e.jsx(fe,{size:14,className:"sm:h-4 sm:w-4"}),"Join"]})})]})})}const He=[{id:"home",label:"Home",icon:De},{id:"duas",label:"Duas",icon:Me},{id:"events",label:"Events",icon:ge}],Ye=[{id:"dashboard",label:"Dashboard",icon:Ie},{id:"events",label:"Events",icon:ge},{id:"settings",label:"Settings",icon:Re}];function Je({activeView:s,onViewChange:l,userRole:a="seeker"}){const r=a==="provider"?Ye:He;return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:"fixed bottom-0 z-50 flex w-full items-center justify-around border-t border-slate-100 bg-white px-6 py-3 pb-6 shadow-[0_-10px_30px_rgba(0,0,0,0.03)] sm:hidden",children:r.map(i=>e.jsxs("button",{onClick:()=>l(i.id),className:`flex flex-col items-center gap-1 rounded-xl px-4 py-2 transition-all ${s===i.id?"bg-emerald-50 text-emerald-600":"text-slate-400 hover:text-slate-600"}`,"aria-label":i.label,children:[e.jsx(i.icon,{size:20}),e.jsx("span",{className:"text-[10px] font-bold",children:i.label})]},i.id))}),e.jsx("div",{className:"fixed bottom-6 left-1/2 z-50 hidden -translate-x-1/2 sm:block",children:e.jsx("div",{className:"flex gap-1 rounded-2xl bg-slate-950 p-1.5 text-white shadow-2xl shadow-slate-950/20",children:r.map(i=>e.jsx("button",{onClick:()=>l(i.id),className:`rounded-xl px-6 py-2.5 text-[10px] font-black tracking-wider uppercase transition-all ${s===i.id?"bg-emerald-600 text-white":"text-slate-400 hover:text-white"}`,children:i.label},i.id))})})]})}function We({time:s,compact:l=!1}){return e.jsxs("div",{className:`group relative overflow-hidden border-none bg-emerald-600 text-white shadow-sm transition-all duration-300 hover:shadow-lg hover:shadow-emerald-200/40 ${l?"rounded-2xl p-4":"rounded-[2.5rem] p-6"}`,children:[e.jsx(Ae,{size:l?60:100,className:"absolute -top-4 -right-4 text-emerald-500/30 transition-transform duration-500 group-hover:scale-110"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("span",{className:`block font-black tracking-wider text-emerald-200 uppercase ${l?"mb-1 text-[8px]":"mb-8 text-[10px]"}`,children:"Imsak (Sehar)"}),e.jsx("h4",{className:`font-black tracking-tight ${l?"text-3xl":"text-5xl"}`,children:s}),!l&&e.jsx("p",{className:"mt-1 text-sm font-medium text-emerald-100/80",children:"Stop eating and intend to fast."})]})]})}function Qe({time:s,compact:l=!1}){return e.jsxs("div",{className:`group relative overflow-hidden border-none bg-slate-950 text-white shadow-sm transition-all duration-300 hover:shadow-lg hover:shadow-slate-200/40 ${l?"rounded-2xl p-4":"rounded-[2.5rem] p-6"}`,children:[e.jsx(Ee,{size:l?60:100,className:"absolute -top-4 -right-4 text-slate-800/50 transition-transform duration-500 group-hover:rotate-12"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("span",{className:`block font-black tracking-wider text-slate-400 uppercase ${l?"mb-1 text-[8px]":"mb-8 text-[10px]"}`,children:"Maghrib (Iftar)"}),e.jsx("h4",{className:`font-black tracking-tight ${l?"text-3xl":"text-5xl"}`,children:s}),!l&&e.jsx("p",{className:"mt-1 text-sm font-medium text-slate-400/80",children:"Break your fast with the sun's set."})]})]})}function Xe({timings:s,compact:l=!1}){return e.jsxs("div",{className:`grid grid-cols-2 ${l?"gap-3":"gap-4"}`,children:[e.jsx(We,{time:s.sehar,compact:l}),e.jsx(Qe,{time:s.iftar,compact:l})]})}function Ze({point:s,onBook:l,compact:a=!1}){return e.jsxs("div",{className:`flex flex-col border border-t-4 border-slate-100 border-t-emerald-500 bg-white shadow-sm transition-all duration-300 hover:shadow-lg hover:shadow-slate-200/40 ${a?"rounded-2xl p-4":"rounded-[2.5rem] p-6"}`,children:[e.jsxs("div",{className:`flex items-start justify-between ${a?"mb-3":"mb-6"}`,children:[e.jsx("h3",{className:`leading-tight font-black text-slate-900 ${a?"text-base":"text-xl"}`,children:s.name}),e.jsx("span",{className:`rounded-lg font-black uppercase ${a?"px-1.5 py-0.5 text-[8px]":"rounded-xl px-2 py-1 text-[9px]"} ${s.price===0?"bg-emerald-50 text-emerald-600":"bg-slate-100 text-slate-600"}`,children:s.price===0?"Free":`₹${s.price}`})]}),e.jsxs("div",{className:`flex-1 bg-slate-50 text-slate-600 italic ${a?"mb-3 rounded-xl p-3 text-xs leading-relaxed":"mb-6 rounded-2xl p-4 text-sm leading-relaxed"}`,children:['"',s.menu,'"']}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>window.open(`tel:${s.phone}`),className:`flex items-center justify-center gap-1.5 rounded-xl border border-slate-200 bg-white font-bold text-slate-700 transition-all hover:bg-slate-50 active:scale-95 ${a?"px-3 py-2 text-xs":"px-6 py-3.5 text-sm"}`,children:[e.jsx(Te,{size:a?12:16})," Call"]}),e.jsxs("button",{onClick:()=>window.open(`https://wa.me/${s.phone.replace(/\D/g,"")}`),className:`flex items-center justify-center gap-1.5 rounded-xl border border-emerald-100 bg-white font-bold text-emerald-600 transition-all hover:bg-emerald-50 active:scale-95 ${a?"px-3 py-2 text-xs":"px-6 py-3.5 text-sm"}`,children:[e.jsx(Le,{size:a?12:16})," Chat"]})]}),e.jsx("button",{onClick:()=>l(s),disabled:!s.isBookable,className:`flex w-full items-center justify-center gap-2 rounded-xl bg-emerald-600 font-bold text-white shadow-lg shadow-emerald-100 transition-all hover:bg-emerald-700 active:scale-95 disabled:bg-emerald-300 disabled:opacity-50 ${a?"px-3 py-2 text-xs":"px-6 py-3.5 text-sm"}`,children:s.isBookable?"Confirm Spot":"Info Only"})]})]})}function es({dua:s}){return e.jsxs("div",{className:"space-y-6 rounded-[2.5rem] border border-slate-100 bg-white p-10 shadow-sm transition-all duration-500 hover:shadow-xl hover:shadow-slate-200/40",children:[e.jsx("h4",{className:"text-[10px] font-black tracking-widest text-emerald-600 uppercase",children:s.title}),e.jsx("p",{className:"text-right text-4xl leading-[1.8] font-bold text-slate-900",dir:"rtl",children:s.arabic}),e.jsxs("div",{className:"space-y-2 border-t border-slate-50 pt-6",children:[e.jsxs("p",{className:"text-sm font-bold text-emerald-700 italic",children:['"',s.transliteration,'"']}),e.jsx("p",{className:"text-sm font-medium text-slate-400",children:s.english})]})]})}function ss({event:s,onInterested:l}){return e.jsxs("div",{className:"flex flex-col justify-between gap-6 rounded-[2.5rem] border border-slate-100 bg-white p-6 shadow-sm transition-all duration-500 hover:shadow-xl hover:shadow-emerald-100/30 md:flex-row md:items-center",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"rounded-full bg-emerald-50 px-3 py-1 text-[10px] font-black text-emerald-600 uppercase",children:s.date}),e.jsx("span",{className:"rounded-full bg-slate-50 px-3 py-1 text-[10px] font-black text-slate-400 uppercase",children:s.time})]}),e.jsx("h3",{className:"text-2xl font-black text-slate-900",children:s.title}),e.jsxs("p",{className:"text-sm font-medium text-slate-400",children:[e.jsx(X,{size:12,className:"mr-1 inline"})," ",s.location," • ",e.jsx(Fe,{size:12,className:"mr-1 inline"})," ",s.speaker]})]}),e.jsx("button",{onClick:()=>l==null?void 0:l(s),className:"flex items-center justify-center gap-2 rounded-2xl bg-slate-900 px-6 py-3.5 text-sm font-bold text-white transition-all hover:bg-slate-800 active:scale-95",children:"Interested"})]})}async function ts(s,l){try{const r=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${s}&lon=${l}&zoom=18&addressdetails=1`,{headers:{"Accept-Language":"en"}})).json();if(r!=null&&r.address){const{road:i,suburb:m,neighbourhood:h,city:n,town:N,village:p,state_district:y,state:b,postcode:f,county:w}=r.address;return{street:i||"",area:m||h||w||"",city:n||N||p||y||"",pincode:f||"",state:b||""}}return null}catch(a){return console.error("Reverse geocoding failed:",a),null}}function as({onClose:s,onSuccess:l}){const[a,r]=t.useState("CHOICE"),[i,m]=t.useState(!1),[h,n]=t.useState(""),[N,p]=t.useState(""),[y,b]=t.useState(""),[f,w]=t.useState("seeker"),[j,x]=t.useState(""),[g,C]=t.useState(""),[z,D]=t.useState(""),[I,c]=t.useState(""),[v,O]=t.useState(""),[Z,ee]=t.useState(""),[se,te]=t.useState(""),[H,ae]=t.useState(""),[le,re]=t.useState(""),[ne,oe]=t.useState(!1),[E,ie]=t.useState(""),[_,ce]=t.useState(""),[Y,de]=t.useState(""),[be,me]=t.useState(""),[F,G]=t.useState(["","","","","",""]),[B,xe]=t.useState(""),J=t.useRef([]),ue=t.useCallback(async()=>{if(navigator.geolocation){oe(!0);try{const o=await new Promise((P,Pe)=>{navigator.geolocation.getCurrentPosition(P,Pe,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),{latitude:d,longitude:u}=o.coords,k=await ts(d,u);k&&(ee(k.street),te(k.area),ae(k.city),re(k.pincode))}catch(o){console.log("Location fetch failed:",o.message)}finally{oe(!1)}}},[]);t.useEffect(()=>{a==="REGISTER"&&ue()},[a,ue]);const je=(o,d)=>{var P;const u=o.target.value;if(isNaN(u))return;const k=[...F];k[d]=u.slice(-1),G(k),u&&d<5&&((P=J.current[d+1])==null||P.focus())},Ne=(o,d)=>{var u;o.key==="Backspace"&&!F[d]&&d>0&&((u=J.current[d-1])==null||u.focus())},ve=async o=>{var d,u;o.preventDefault(),n(""),m(!0);try{const k=await M.login({email:N,password:y});if(k.success)k.token&&localStorage.setItem("auth_token",k.token),S.success("Welcome back!",{description:`Logged in as ${k.user.name}`}),l(k.user);else{const P=k.message||"Login failed";n(P),S.error("Login Failed",{description:P})}}catch(k){const P=k.message||((u=(d=k.errors)==null?void 0:d.email)==null?void 0:u[0])||"Login failed. Please try again.";n(P),S.error("Login Failed",{description:P})}finally{m(!1)}},ye=async o=>{var d,u;if(o.preventDefault(),n(""),g.length<6){n("Password must be at least 6 characters"),S.error("Validation Error",{description:"Password must be at least 6 characters"});return}m(!0);try{const k=await M.register({email:j,password:g,name:z,contact:I,role:f,place_name:f==="provider"?v:null,street:Z,area:se,city:H,pincode:le});if(k.success)S.success("OTP Sent!",{description:"Please check your email for the verification code"}),xe("register"),G(["","","","","",""]),r("OTP");else{const P=k.message||"Registration failed";n(P),S.error("Registration Failed",{description:P})}}catch(k){const P=k.message||((u=(d=k.errors)==null?void 0:d.email)==null?void 0:u[0])||"Registration failed. Please try again.";n(P),S.error("Registration Failed",{description:P})}finally{m(!1)}},we=async o=>{if(o.preventDefault(),n(""),!E){n("Please enter your email"),S.error("Email Required",{description:"Please enter your registered email address"});return}m(!0);try{const d=await M.forgotPassword(E);if(d.success)S.success("OTP Sent!",{description:"Please check your email for the reset code"}),xe("forgot"),G(["","","","","",""]),r("OTP");else{const u=d.message||"Failed to send OTP";n(u),S.error("Failed",{description:u})}}catch(d){const u=d.message||"Failed to send OTP. Please try again.";n(u),S.error("Failed",{description:u})}finally{m(!1)}},ke=async()=>{const o=F.join("");if(!(o.length<6)){n(""),m(!0);try{if(B==="register"){const d=await M.verifyRegistrationOtp(j,o);if(d.success)d.token&&localStorage.setItem("auth_token",d.token),S.success("Account Verified!",{description:"Welcome to Ramzania!"}),l(d.user);else{const u=d.message||"Invalid OTP";n(u),S.error("Verification Failed",{description:u})}}else if(B==="forgot"){const d=await M.verifyForgotPasswordOtp(E,o);if(d.success)S.success("OTP Verified!",{description:"Now set your new password"}),me(d.reset_token),r("RESET_PASSWORD");else{const u=d.message||"Invalid OTP";n(u),S.error("Verification Failed",{description:u})}}}catch(d){const u=d.message||"OTP verification failed. Please try again.";n(u),S.error("Verification Failed",{description:u})}finally{m(!1)}}},Se=async o=>{if(o.preventDefault(),n(""),_.length<6){n("Password must be at least 6 characters"),S.error("Validation Error",{description:"Password must be at least 6 characters"});return}if(_!==Y){n("Passwords do not match"),S.error("Validation Error",{description:"Passwords do not match"});return}m(!0);try{const d=await M.resetPassword(E,be,_,Y);if(d.success)S.success("Password Reset!",{description:"You can now login with your new password"}),r("LOGIN"),n(""),ie(""),ce(""),de(""),me("");else{const u=d.message||"Password reset failed";n(u),S.error("Reset Failed",{description:u})}}catch(d){const u=d.message||"Password reset failed. Please try again.";n(u),S.error("Reset Failed",{description:u})}finally{m(!1)}},Ce=async()=>{m(!0),n("");try{let o;if(B==="register"?o=await M.resendRegistrationOtp(j):o=await M.forgotPassword(E),o.success)S.success("OTP Resent!",{description:"Please check your email for the new code"}),G(["","","","","",""]);else{const d=o.message||"Failed to resend OTP";n(d),S.error("Failed",{description:d})}}catch{const d="Failed to resend OTP. Please try again.";n(d),S.error("Failed",{description:d})}finally{m(!1)}},$="w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm font-medium outline-none transition-all focus:border-emerald-400 focus:ring-2 focus:ring-emerald-100",R="w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2.5 text-sm font-medium outline-none transition-all focus:border-emerald-400 focus:ring-2 focus:ring-emerald-100",T="flex w-full items-center justify-center gap-2 rounded-xl bg-emerald-600 px-4 py-3 text-sm font-bold text-white shadow-lg shadow-emerald-100 transition-all hover:bg-emerald-700 active:scale-[0.98] disabled:opacity-50",ze={CHOICE:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-black tracking-tight text-slate-900",children:"Join Ramzania"}),e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Your portal to community Sehar & Iftar."}),e.jsxs("div",{className:"space-y-3 pt-2",children:[e.jsx("button",{className:T,onClick:()=>r("LOGIN"),children:"Sign In"}),e.jsx("button",{className:"flex w-full items-center justify-center gap-2 rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm font-bold text-slate-700 transition-all hover:bg-slate-50 active:scale-[0.98]",onClick:()=>r("REGISTER"),children:"Create Account"})]})]}),LOGIN:e.jsxs("form",{onSubmit:ve,className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>r("CHOICE"),className:"-ml-2 p-2 text-slate-400 hover:text-slate-600",children:e.jsx(V,{size:18})}),e.jsx("h2",{className:"text-xl font-black text-slate-900",children:"Sign In"})]}),h&&e.jsx("p",{className:"rounded-lg bg-red-50 px-3 py-2 text-xs font-medium text-red-600",children:h}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"email",required:!0,placeholder:"Email address",className:$,value:N,onChange:o=>p(o.target.value)}),e.jsx("input",{type:"password",required:!0,placeholder:"Password",className:$,value:y,onChange:o=>b(o.target.value)})]}),e.jsx("button",{type:"submit",disabled:i,className:T,children:i?e.jsx(A,{className:"animate-spin",size:18}):"Sign In"}),e.jsx("button",{type:"button",onClick:()=>r("FORGOT"),className:"w-full text-center text-[10px] font-bold tracking-wide text-slate-400 uppercase hover:text-emerald-600",children:"Forgot Password?"})]}),REGISTER:e.jsxs("form",{onSubmit:ye,className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>r("CHOICE"),className:"-ml-2 p-2 text-slate-400 hover:text-slate-600",children:e.jsx(V,{size:18})}),e.jsx("h2",{className:"text-xl font-black text-slate-900",children:"Create Account"})]}),h&&e.jsx("p",{className:"rounded-lg bg-red-50 px-3 py-2 text-xs font-medium text-red-600",children:h}),e.jsxs("div",{className:"flex rounded-xl bg-slate-100 p-1",children:[e.jsx("button",{type:"button",onClick:()=>w("seeker"),className:`flex-1 rounded-lg py-2.5 text-xs font-bold transition-all ${f==="seeker"?"bg-white text-emerald-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Seeker"}),e.jsx("button",{type:"button",onClick:()=>w("provider"),className:`flex-1 rounded-lg py-2.5 text-xs font-bold transition-all ${f==="provider"?"bg-white text-emerald-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Provider"})]}),e.jsx("p",{className:"text-[10px] font-medium text-slate-400",children:f==="seeker"?"Search & book Sehar/Iftar places near you":"Add & manage your Sehar/Iftar distribution points"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"email",required:!0,placeholder:"Email address",className:R,value:j,onChange:o=>x(o.target.value)}),e.jsx("input",{type:"password",required:!0,placeholder:"Password (min 6 chars)",className:R,value:g,onChange:o=>C(o.target.value)}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",required:!0,placeholder:"Full Name",className:R,value:z,onChange:o=>D(o.target.value)}),e.jsx("input",{type:"tel",required:!0,placeholder:"Contact Number",className:R,value:I,onChange:o=>c(o.target.value)})]}),f==="provider"&&e.jsx("input",{type:"text",required:!0,placeholder:"Place Name (e.g., Restaurant, Masjid,..)",className:R,value:v,onChange:o=>O(o.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500",children:"Address Details"}),ne&&e.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-medium text-emerald-600",children:[e.jsx(A,{size:10,className:"animate-spin"}),"Fetching location..."]}),!ne&&H&&e.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-medium text-emerald-600",children:[e.jsx(X,{size:10}),"Auto-filled"]})]}),e.jsx("input",{type:"text",required:!0,placeholder:"Street / Door No",className:R,value:Z,onChange:o=>ee(o.target.value)}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",required:!0,placeholder:"Area / Locality",className:R,value:se,onChange:o=>te(o.target.value)}),e.jsx("input",{type:"text",required:!0,placeholder:"City",className:R,value:H,onChange:o=>ae(o.target.value)})]}),e.jsx("input",{type:"text",required:!0,placeholder:"Pincode",className:R,value:le,onChange:o=>re(o.target.value)})]}),e.jsx("button",{type:"submit",disabled:i,className:T,children:i?e.jsx(A,{className:"animate-spin",size:18}):"Continue →"})]}),FORGOT:e.jsxs("form",{onSubmit:we,className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>r("LOGIN"),className:"-ml-2 p-2 text-slate-400 hover:text-slate-600",children:e.jsx(V,{size:18})}),e.jsx("h2",{className:"text-xl font-black text-slate-900",children:"Reset Password"})]}),e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Enter your email to receive a verification code."}),h&&e.jsx("p",{className:"rounded-lg bg-red-50 px-3 py-2 text-xs font-medium text-red-600",children:h}),e.jsx("input",{type:"email",required:!0,placeholder:"Registered email",className:$,value:E,onChange:o=>ie(o.target.value)}),e.jsx("button",{type:"submit",disabled:i,className:T,children:i?e.jsx(A,{className:"animate-spin",size:18}):"Send OTP"})]}),OTP:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>r(B==="register"?"REGISTER":"FORGOT"),className:"-ml-2 p-2 text-slate-400 hover:text-slate-600",children:e.jsx(V,{size:18})}),e.jsx("h2",{className:"text-xl font-black text-slate-900",children:"Verify Email"})]}),e.jsxs("p",{className:"text-sm font-medium text-slate-500",children:["Enter the 6-digit code sent to ",e.jsx("span",{className:"font-bold text-slate-700",children:B==="register"?j:E})]}),h&&e.jsx("p",{className:"rounded-lg bg-red-50 px-3 py-2 text-xs font-medium text-red-600",children:h}),e.jsx("div",{className:"flex justify-between gap-2",children:F.map((o,d)=>e.jsx("input",{ref:u=>J.current[d]=u,type:"text",inputMode:"numeric",maxLength:1,className:"h-12 w-full rounded-xl border border-slate-200 bg-slate-50 text-center text-lg font-bold transition-all outline-none focus:border-emerald-400 focus:ring-2 focus:ring-emerald-100",value:o,onChange:u=>je(u,d),onKeyDown:u=>Ne(u,d)},d))}),e.jsx("button",{type:"button",onClick:ke,disabled:i||F.join("").length<6,className:T,children:i?e.jsx(A,{className:"animate-spin",size:18}):"Verify"}),e.jsx("button",{type:"button",onClick:Ce,disabled:i,className:"w-full text-center text-[10px] font-bold tracking-wide text-slate-400 uppercase hover:text-emerald-600",children:"Resend Code"})]}),RESET_PASSWORD:e.jsxs("form",{onSubmit:Se,className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{size:20,className:"text-emerald-600"}),e.jsx("h2",{className:"text-xl font-black text-slate-900",children:"New Password"})]}),e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Create a new password for your account."}),h&&e.jsx("p",{className:"rounded-lg bg-red-50 px-3 py-2 text-xs font-medium text-red-600",children:h}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"password",required:!0,placeholder:"New Password (min 6 chars)",className:$,value:_,onChange:o=>ce(o.target.value)}),e.jsx("input",{type:"password",required:!0,placeholder:"Confirm Password",className:$,value:Y,onChange:o=>de(o.target.value)})]}),e.jsx("button",{type:"submit",disabled:i,className:T,children:i?e.jsx(A,{className:"animate-spin",size:18}):"Reset Password"})]})};return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-end justify-center bg-slate-900/40 p-4 backdrop-blur-sm sm:items-center",children:e.jsxs("div",{className:"animate-in slide-in-from-bottom-4 w-full max-w-md rounded-2xl border border-slate-100 bg-white p-6 shadow-xl sm:rounded-3xl sm:p-8",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-emerald-50 text-emerald-600",children:e.jsx(fe,{size:20})}),e.jsx("button",{onClick:s,className:"rounded-full p-2 text-slate-300 transition-all hover:bg-slate-100 hover:text-slate-500",children:e.jsx(q,{size:18})})]}),ze[a]]})})}function ls({point:s,onClose:l,onSuccess:a}){const[r,i]=t.useState(!1),[m,h]=t.useState({name:"",email:"",phone:"",persons:1}),n=y=>{const{name:b,value:f}=y.target;h(w=>({...w,[b]:f}))},N=async y=>{y.preventDefault(),i(!0),await new Promise(b=>setTimeout(b,500)),i(!1),a(`Spot booked at ${s.name}!`)},p="w-full rounded-2xl border-none bg-slate-50 px-6 py-4 font-bold outline-none focus:ring-2 focus:ring-emerald-500";return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-end justify-center bg-slate-900/30 p-4 backdrop-blur-sm sm:items-center",children:e.jsxs("div",{className:"animate-in slide-in-from-bottom-10 w-full max-w-md rounded-[2.5rem] border border-slate-100 bg-white p-8 shadow-sm",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("h2",{className:"text-3xl font-black tracking-tight text-slate-900",children:["Book ",e.jsx("span",{className:"text-emerald-600",children:"Spot"})]}),e.jsx("button",{onClick:l,className:"rounded-full p-2 text-slate-400 hover:bg-slate-50",children:e.jsx(q,{size:20})})]}),e.jsxs("div",{className:"mb-6 rounded-2xl bg-emerald-50 p-4",children:[e.jsx("p",{className:"text-sm font-black text-emerald-800",children:s.name}),e.jsxs("p",{className:"text-xs text-emerald-600",children:[s.area," • ",s.timing]})]}),e.jsxs("form",{className:"space-y-4",onSubmit:N,children:[e.jsx("input",{required:!0,type:"text",name:"name",placeholder:"Full Name",className:p,value:m.name,onChange:n}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{required:!0,type:"email",name:"email",placeholder:"Email",className:p,value:m.email,onChange:n}),e.jsx("input",{required:!0,type:"tel",name:"phone",placeholder:"Mobile",className:p,value:m.phone,onChange:n})]}),e.jsx("input",{required:!0,type:"number",name:"persons",placeholder:"No. of Persons",min:"1",max:"5",className:p,value:m.persons,onChange:n}),e.jsx("button",{type:"submit",disabled:r,className:"mt-4 flex w-full items-center justify-center gap-2 rounded-2xl bg-emerald-600 px-6 py-3.5 text-sm font-bold text-white shadow-lg shadow-emerald-100 transition-all hover:bg-emerald-700 active:scale-95 disabled:opacity-50",children:r?e.jsx(A,{className:"animate-spin",size:20}):"Confirm Reservation"})]})]})})}function rs({timings:s,points:l,onBook:a}){const[r,i]=t.useState(""),m=l.filter(h=>h.name.toLowerCase().includes(r.toLowerCase())||h.menu.toLowerCase().includes(r.toLowerCase()));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"mb-3 text-sm font-black tracking-tight text-slate-900",children:"Today's Timings"}),e.jsx(Xe,{timings:s,compact:!0})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{size:16,className:"text-emerald-600"}),e.jsx("h2",{className:"text-sm font-black tracking-tight text-slate-900",children:"Food Points"})]}),e.jsxs("span",{className:"rounded-lg bg-slate-100 px-2 py-0.5 text-xs font-bold text-slate-600",children:[m.length," nearby"]})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(qe,{size:16,className:"absolute top-1/2 left-3 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search food points...",value:r,onChange:h=>i(h.target.value),className:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pr-4 pl-9 text-sm font-medium text-slate-900 placeholder:text-slate-400 focus:border-emerald-300 focus:ring-2 focus:ring-emerald-100 focus:outline-none"})]}),m.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:m.map(h=>e.jsx(Ze,{point:h,onBook:a,compact:!0},h.id))}):e.jsxs("div",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50 py-8 text-center",children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"No food points found"}),e.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"Try a different search term"})]})]})]})}const ns=[{id:1,userName:"Ahmed Khan",userPhone:"+91 98765 43210",date:new Date().toISOString(),ramzanDay:5,guests:4,mealType:"Iftar",status:"confirmed"},{id:2,userName:"Fatima Begum",userPhone:"+91 87654 32109",date:new Date(Date.now()-864e5).toISOString(),ramzanDay:4,guests:2,mealType:"Sehar",status:"completed"},{id:3,userName:"Mohammad Ali",userPhone:"+91 76543 21098",date:new Date().toISOString(),ramzanDay:5,guests:6,mealType:"Iftar",status:"pending"}],os=[{id:1,ramzanDay:5,menu:"Biryani, Kheer, Dates, Rooh Afza",mealType:"iftar",capacity:100,price:"free",bookedCount:45},{id:2,ramzanDay:6,menu:"Haleem, Fruit Chaat, Sharbat",mealType:"iftar",capacity:80,price:"free",bookedCount:12},{id:3,ramzanDay:7,menu:"Nihari, Naan, Chai",mealType:"sehar",capacity:50,price:"free",bookedCount:0}];function is({onClose:s,onSave:l,editingPoint:a}){var x,g;const[r,i]=t.useState(((x=a==null?void 0:a.ramzanDay)==null?void 0:x.toString())||"1"),[m,h]=t.useState((a==null?void 0:a.menu)||""),[n,N]=t.useState((a==null?void 0:a.mealType)||"iftar"),[p,y]=t.useState(((g=a==null?void 0:a.capacity)==null?void 0:g.toString())||"50"),[b,f]=t.useState((a==null?void 0:a.price)||"free"),w="w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm font-medium outline-none transition-all focus:border-emerald-400 focus:ring-2 focus:ring-emerald-100",j=C=>{C.preventDefault(),l({id:(a==null?void 0:a.id)||Date.now(),ramzanDay:Number.parseInt(r),menu:m,mealType:n,capacity:Number.parseInt(p)||50,price:b,bookedCount:(a==null?void 0:a.bookedCount)||0}),s()};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-end justify-center bg-slate-900/40 p-4 backdrop-blur-sm sm:items-center",children:e.jsxs("div",{className:"animate-in slide-in-from-bottom-4 sm:slide-in-from-bottom-0 sm:zoom-in-95 w-full max-w-md rounded-2xl bg-white p-6 shadow-xl",children:[e.jsxs("div",{className:"mb-5 flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-black text-slate-900",children:[a?"Edit":"Add"," Food Offering"]}),e.jsx("button",{onClick:s,className:"rounded-full p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:e.jsx(q,{size:18})})]}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-bold text-slate-500",children:"Ramzan Day"}),e.jsx("select",{value:r,onChange:C=>i(C.target.value),className:w,disabled:!!a,children:Array.from({length:30},(C,z)=>e.jsxs("option",{value:z+1,children:[z+1,z===0?"st":z===1?"nd":z===2?"rd":"th"," Ramzan"]},z+1))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-bold text-slate-500",children:"Meal Type"}),e.jsxs("select",{value:n,onChange:C=>N(C.target.value),className:w,children:[e.jsx("option",{value:"iftar",children:"Iftar"}),e.jsx("option",{value:"sehar",children:"Sehar"}),e.jsx("option",{value:"both",children:"Both"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-bold text-slate-500",children:"Menu Items"}),e.jsx("textarea",{required:!0,placeholder:"e.g., Biryani, Kheer, Dates, Rooh Afza...",className:w+" resize-none",rows:2,value:m,onChange:C=>h(C.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-bold text-slate-500",children:"Capacity"}),e.jsx("input",{type:"number",required:!0,min:"1",placeholder:"People",className:w,value:p,onChange:C=>y(C.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-bold text-slate-500",children:"Price"}),e.jsxs("select",{value:b,onChange:C=>f(C.target.value),className:w,children:[e.jsx("option",{value:"free",children:"Free"}),e.jsx("option",{value:"paid",children:"Paid"})]})]})]}),e.jsxs("button",{type:"submit",className:"flex w-full items-center justify-center gap-2 rounded-xl bg-emerald-600 py-3 text-sm font-bold text-white shadow-lg shadow-emerald-100 transition-all hover:bg-emerald-700 active:scale-[0.98]",children:[a?"Update":"Add"," Offering"]})]})]})})}function cs({onClose:s,onSave:l}){const[a,r]=t.useState(""),[i,m]=t.useState(""),[h,n]=t.useState("1"),[N,p]=t.useState("iftar"),[y,b]=t.useState("1"),f="w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm font-medium outline-none transition-all focus:border-emerald-400 focus:ring-2 focus:ring-emerald-100",w=j=>{j.preventDefault(),l({id:Date.now(),userName:a,userPhone:i,guests:Number.parseInt(h)||1,mealType:N.charAt(0).toUpperCase()+N.slice(1),ramzanDay:Number.parseInt(y),date:new Date().toISOString(),status:"confirmed"}),s()};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-end justify-center bg-slate-900/40 p-4 backdrop-blur-sm sm:items-center",children:e.jsxs("div",{className:"animate-in slide-in-from-bottom-4 sm:slide-in-from-bottom-0 sm:zoom-in-95 w-full max-w-md rounded-2xl bg-white p-6 shadow-xl",children:[e.jsxs("div",{className:"mb-5 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-black text-slate-900",children:"Add Booking"}),e.jsx("button",{onClick:s,className:"rounded-full p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:e.jsx(q,{size:18})})]}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsx("input",{type:"text",required:!0,placeholder:"Guest Name",className:f,value:a,onChange:j=>r(j.target.value)}),e.jsx("input",{type:"tel",required:!0,placeholder:"Phone Number",className:f,value:i,onChange:j=>m(j.target.value)}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"number",required:!0,min:"1",placeholder:"No. of Guests",className:f,value:h,onChange:j=>n(j.target.value)}),e.jsxs("select",{value:N,onChange:j=>p(j.target.value),className:f,children:[e.jsx("option",{value:"iftar",children:"Iftar"}),e.jsx("option",{value:"sehar",children:"Sehar"}),e.jsx("option",{value:"both",children:"Both"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-bold text-slate-500",children:"Ramzan Day"}),e.jsx("select",{value:y,onChange:j=>b(j.target.value),className:f,children:Array.from({length:30},(j,x)=>e.jsxs("option",{value:x+1,children:[x+1,x===0?"st":x===1?"nd":x===2?"rd":"th"," Ramzan"]},x+1))})]}),e.jsx("button",{type:"submit",className:"flex w-full items-center justify-center gap-2 rounded-xl bg-emerald-600 py-3 text-sm font-bold text-white shadow-lg shadow-emerald-100 transition-all hover:bg-emerald-700 active:scale-[0.98]",children:"Add Booking"})]})]})})}function ds({user:s}){const[l,a]=t.useState("offerings"),[r,i]=t.useState(!1),[m,h]=t.useState(!1),[n,N]=t.useState(null),[p,y]=t.useState(os),[b,f]=t.useState(ns),w=p.length,j=b.length,x=b.filter(c=>c.status==="pending").length,g=c=>{y(n?v=>v.map(O=>O.id===c.id?c:O):v=>[...v,c]),N(null)},C=c=>{window.confirm("Delete this food offering?")&&y(v=>v.filter(O=>O.id!==c))},z=c=>{f(v=>[c,...v])},D=c=>{switch(c){case"confirmed":return"bg-emerald-50 text-emerald-600";case"pending":return"bg-amber-50 text-amber-600";case"completed":return"bg-slate-100 text-slate-500";default:return"bg-slate-100 text-slate-500"}},I=c=>{const v=["th","st","nd","rd"],O=c%100;return c+(v[(O-20)%10]||v[O]||v[0])};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-black text-slate-900",children:"Provider Dashboard"}),e.jsx("p",{className:"text-xs font-medium text-slate-500",children:(s==null?void 0:s.placeName)||"Manage your Ramzan offerings"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"rounded-xl bg-emerald-50 p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-black text-emerald-600",children:w}),e.jsx("p",{className:"text-[10px] font-bold text-emerald-700 uppercase",children:"Offerings"})]}),e.jsxs("div",{className:"rounded-xl bg-slate-100 p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-black text-slate-700",children:j}),e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Bookings"})]}),e.jsxs("div",{className:"rounded-xl bg-amber-50 p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-black text-amber-600",children:x}),e.jsx("p",{className:"text-[10px] font-bold text-amber-700 uppercase",children:"Pending"})]})]}),e.jsxs("div",{className:"flex rounded-xl bg-slate-100 p-1",children:[e.jsx("button",{onClick:()=>a("offerings"),className:`flex-1 rounded-lg py-2 text-xs font-bold transition-all ${l==="offerings"?"bg-white text-emerald-600 shadow-sm":"text-slate-500"}`,children:"Food Offerings"}),e.jsx("button",{onClick:()=>a("bookings"),className:`flex-1 rounded-lg py-2 text-xs font-bold transition-all ${l==="bookings"?"bg-white text-emerald-600 shadow-sm":"text-slate-500"}`,children:"Bookings"})]}),l==="offerings"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-sm font-bold text-slate-700",children:"My Offerings"}),e.jsxs("button",{onClick:()=>{N(null),i(!0)},className:"flex items-center gap-1.5 rounded-lg bg-emerald-600 px-3 py-2 text-xs font-bold text-white transition-all hover:bg-emerald-700 active:scale-95",children:[e.jsx(he,{size:14}),"Add Day"]})]}),e.jsx("div",{className:"space-y-3",children:p.length>0?p.sort((c,v)=>c.ramzanDay-v.ramzanDay).map(c=>e.jsxs("div",{className:"rounded-xl border border-slate-100 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"rounded-lg bg-emerald-100 px-2 py-1 text-xs font-black text-emerald-700",children:[I(c.ramzanDay)," Ramzan"]}),e.jsx("span",{className:"ml-2 rounded bg-slate-100 px-1.5 py-0.5 text-[9px] font-bold text-slate-600 uppercase",children:c.mealType})]}),e.jsx("span",{className:`rounded-lg px-2 py-0.5 text-[9px] font-black uppercase ${c.price==="free"?"bg-emerald-50 text-emerald-600":"bg-slate-100 text-slate-600"}`,children:c.price})]}),e.jsxs("p",{className:"mt-2 text-xs text-slate-600 italic",children:['"',c.menu,'"']}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(W,{size:10}),c.bookedCount,"/",c.capacity]}),e.jsx("span",{className:`${c.bookedCount>=c.capacity?"text-red-500":"text-emerald-600"}`,children:c.bookedCount>=c.capacity?"Full":`${c.capacity-c.bookedCount} left`})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>{N(c),i(!0)},className:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:e.jsx(_e,{size:14})}),e.jsx("button",{onClick:()=>C(c.id),className:"rounded-lg p-1.5 text-slate-400 hover:bg-red-50 hover:text-red-500",children:e.jsx(Ge,{size:14})})]})]})]},c.id)):e.jsxs("div",{className:"rounded-xl border border-dashed border-slate-200 bg-slate-50 py-12 text-center",children:[e.jsx(Ve,{size:32,className:"mx-auto mb-3 text-slate-300"}),e.jsx("p",{className:"font-bold text-slate-500",children:"No offerings yet"}),e.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"Add food offerings for specific Ramzan days"})]})})]}),l==="bookings"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-sm font-bold text-slate-700",children:"Bookings"}),e.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-1.5 rounded-lg bg-emerald-600 px-3 py-2 text-xs font-bold text-white transition-all hover:bg-emerald-700 active:scale-95",children:[e.jsx(he,{size:14}),"Add Booking"]})]}),e.jsx("div",{className:"space-y-3",children:b.length>0?b.map(c=>e.jsxs("div",{className:"rounded-xl border border-slate-100 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-900",children:c.userName}),e.jsx("p",{className:"text-xs text-slate-500",children:c.userPhone})]}),e.jsx("span",{className:`rounded-lg px-2 py-1 text-[10px] font-bold capitalize ${D(c.status)}`,children:c.status})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-xs text-slate-500",children:[e.jsxs("span",{className:"rounded bg-emerald-100 px-1.5 py-0.5 text-[9px] font-bold text-emerald-700",children:[I(c.ramzanDay)," Ramzan"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(W,{size:12}),c.guests," guests"]}),e.jsx("span",{className:"rounded bg-slate-100 px-1.5 py-0.5 text-[9px] font-bold text-slate-600",children:c.mealType})]})]},c.id)):e.jsxs("div",{className:"rounded-xl border border-dashed border-slate-200 bg-slate-50 py-12 text-center",children:[e.jsx(W,{size:32,className:"mx-auto mb-3 text-slate-300"}),e.jsx("p",{className:"font-bold text-slate-500",children:"No bookings yet"}),e.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"Add your first booking or wait for seekers to reserve"})]})})]}),r&&e.jsx(is,{onClose:()=>i(!1),onSave:g,editingPoint:n}),m&&e.jsx(cs,{onClose:()=>h(!1),onSave:z})]})}function ms({duas:s}){return e.jsxs("div",{className:"space-y-12",children:[e.jsxs("h2",{className:"text-5xl font-black tracking-tighter text-slate-950 md:text-7xl",children:["Daily ",e.jsx("span",{className:"text-emerald-600",children:"Duas."})]}),e.jsx("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2",children:s.map(l=>e.jsx(es,{dua:l},l.id))}),s.length===0&&e.jsx("div",{className:"py-12 text-center",children:e.jsx("p",{className:"text-lg font-bold text-slate-400",children:"No duas available"})})]})}function pe({events:s,onInterested:l}){return e.jsxs("div",{className:"space-y-12",children:[e.jsxs("h2",{className:"text-5xl font-black tracking-tighter text-slate-950 md:text-7xl",children:["Community ",e.jsx("span",{className:"text-emerald-600",children:"Events."})]}),e.jsx("div",{className:"space-y-4",children:s.map(a=>e.jsx(ss,{event:a,onInterested:l},a.id))}),s.length===0&&e.jsxs("div",{className:"py-12 text-center",children:[e.jsx("p",{className:"text-lg font-bold text-slate-400",children:"No events scheduled"}),e.jsx("p",{className:"text-sm text-slate-300",children:"Check back later for upcoming events"})]})]})}function xs({message:s,onClose:l}){return s?e.jsxs("div",{className:"animate-in fade-in slide-in-from-top-10 fixed top-8 left-1/2 z-[200] flex -translate-x-1/2 items-center gap-3 rounded-full bg-slate-950 px-8 py-4 text-white shadow-2xl",children:[e.jsx(Ue,{className:"text-emerald-400",size:18}),e.jsx("span",{className:"text-sm font-black tracking-tight",children:s}),e.jsx("button",{onClick:l,className:"text-slate-500 transition-colors hover:text-white",children:e.jsx(q,{size:16})})]}):null}const U="ramzania_user_location";async function us(s,l){try{const r=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${s}&lon=${l}&zoom=14&addressdetails=1`,{headers:{"Accept-Language":"en"}})).json();if(r&&r.address){const{suburb:i,neighbourhood:m,city:h,town:n,village:N,state_district:p,state:y,country:b}=r.address;return{raw:r,area:i||m||h||n||N||p||""||"Unknown Area",fullAddress:r.display_name||"",city:h||n||N||p||"",state:y||"",country:b||"",addressDetails:r.address}}return null}catch(a){return console.error("Reverse geocoding failed:",a),null}}function hs(){const[s,l]=t.useState(null),[a,r]=t.useState(null),[i,m]=t.useState(!1),[h,n]=t.useState(null),[N,p]=t.useState("prompt");t.useEffect(()=>{navigator.permissions&&navigator.permissions.query({name:"geolocation"}).then(x=>{p(x.state),x.onchange=()=>{p(x.state)}})},[]),t.useEffect(()=>{const x=localStorage.getItem(U);if(x)try{const g=JSON.parse(x);g.lat&&g.lng&&l({lat:g.lat,lng:g.lng}),g.address&&r(g.address)}catch{localStorage.removeItem(U)}},[]),t.useEffect(()=>{N==="granted"&&!s&&b()},[N]);const y=t.useCallback((x,g)=>{l(x),r(g),localStorage.setItem(U,JSON.stringify({lat:x.lat,lng:x.lng,address:g,timestamp:Date.now()}))},[]),b=t.useCallback(async()=>{if(!navigator.geolocation){n("Geolocation is not supported");return}m(!0),n(null),navigator.geolocation.getCurrentPosition(async x=>{const g={lat:x.coords.latitude,lng:x.coords.longitude},C=await us(g.lat,g.lng);y(g,C),m(!1)},x=>{x.code===x.PERMISSION_DENIED?(n("Location permission denied"),p("denied")):x.code===x.POSITION_UNAVAILABLE?n("Location unavailable"):x.code===x.TIMEOUT?n("Location request timed out"):n("Enable GPS to see distance"),m(!1)},{timeout:1e4,enableHighAccuracy:!0})},[y]),f=t.useCallback(()=>{b()},[b]),w=t.useCallback((x,g)=>{if(!s)return null;const C=6371,z=(x-s.lat)*Math.PI/180,D=(g-s.lng)*Math.PI/180,I=Math.sin(z/2)*Math.sin(z/2)+Math.cos(s.lat*Math.PI/180)*Math.cos(x*Math.PI/180)*Math.sin(D/2)*Math.sin(D/2),c=2*Math.atan2(Math.sqrt(I),Math.sqrt(1-I));return C*c},[s]),j=t.useCallback(()=>{l(null),r(null),localStorage.removeItem(U)},[]);return{location:s,address:a,isLocating:i,error:h,permissionStatus:N,requestLocation:f,calculateDistance:w,clearLocation:j}}const L=s=>new Promise(l=>setTimeout(l,s)),ps=async()=>(await L(300),[{id:1,name:"Masjid-e-Noor",area:"T. Nagar",lat:13.0405,lng:80.2337,slots:25,menu:"Mutton Kanji, Dates & Fruit Salad",phone:"+919000000001",timing:"3:30 AM - 4:15 AM",price:0,isBookable:!0,type:"Sehar"},{id:2,name:"Triplicane Big Masjid",area:"Triplicane",lat:13.0601,lng:80.2747,slots:150,menu:"Beef Kanji & Tea",phone:"+919000000002",timing:"6:35 PM (Iftar)",price:0,isBookable:!1,type:"Iftar"},{id:3,name:"Ambur Private Kitchen",area:"Mount Road",lat:13.0645,lng:80.2594,slots:40,menu:"Biryani & Lemon Juice",phone:"+919000000003",timing:"3:15 AM - 4:00 AM",price:120,isBookable:!0,type:"Sehar"}]),fs=async()=>(await L(200),[{id:1,title:"Dua for Suhoor",arabic:"وَبِصَوْمِ غَدٍ نَّوَيْتُ مِنْ شَهْرِ رَمَضَانَ",transliteration:"Wa bi-sawmi ghadinn nawaitu min shahri ramadan",english:"I intend to keep the fast for tomorrow in the month of Ramadan."},{id:2,title:"Dua for Iftar",arabic:"اللَّهُمَّ إِنِّي لَكَ صُمْتُ وَبِكَ آمَنْتُ وَعَلَيْكَ تَوَكَّلْتُ وَعَلَى رِزْقِكَ أَفْطَرْتُ",transliteration:"Allahumma inni laka sumtu, wa bika aamantu, wa 'alayka tawakkaltu, wa 'ala rizqika aftartu",english:"O Allah! I fasted for You and I believe in You and I put my trust in You and I break my fast with Your sustenance."}]),gs=async()=>(await L(200),[{id:1,title:"Ramzan Lecture Series",location:"Anna Nagar Masjid",date:"Feb 15, 2026",time:"10:30 PM",speaker:"Shaykh Abdullah",description:"A series on the virtues of the last 10 days."},{id:2,title:"Community Iftar Meet",location:"Marina Beach",date:"Feb 12, 2026",time:"6:00 PM",speaker:"Open Event",description:"Bachelors meet-up for a shared Iftar experience."}]),bs=async(s="Chennai")=>(await L(100),{sehar:"4:52 AM",iftar:"6:24 PM",area:s}),js=async(s,l)=>(await L(1e3),{success:!0,user:{email:s,role:s.includes("admin")?"admin":"seeker",name:s.split("@")[0],token:"token-"+Date.now()}}),Ns=async(s,l)=>(await L(500),{success:!0,bookingId:`BK-${Date.now()}`,message:"Spot booked successfully!"}),K={fetchPoints:ps,fetchDuas:fs,fetchEvents:gs,fetchTimings:bs,login:js,bookSpot:Ns};function vs(){const[s,l]=t.useState([]),[a,r]=t.useState([]),[i,m]=t.useState([]),[h,n]=t.useState({sehar:"04:52 AM",iftar:"06:24 PM",area:"Chennai"}),[N,p]=t.useState(!0),[y,b]=t.useState(null),f=t.useCallback(async()=>{p(!0),b(null);try{const[w,j,x,g]=await Promise.all([K.fetchPoints(),K.fetchDuas(),K.fetchEvents(),K.fetchTimings()]);l(w),r(j),m(x),n(g)}catch(w){b(w.message||"Failed to fetch data")}finally{p(!1)}},[]);return t.useEffect(()=>{f()},[f]),{points:s,duas:a,events:i,timings:h,loading:N,error:y,refetch:f}}const Q="ramzania_user";function Ps(){const[s,l]=t.useState(null),[a,r]=t.useState(!1),[i,m]=t.useState("home"),[h,n]=t.useState(null),[N,p]=t.useState(null),{points:y,duas:b,events:f,timings:w}=vs(),{address:j,isLocating:x,requestLocation:g}=hs();t.useEffect(()=>{const v=localStorage.getItem(Q);if(v){const O=JSON.parse(v);l(O),m(O.role==="provider"?"dashboard":"home")}},[]);const C=v=>{l(v),localStorage.setItem(Q,JSON.stringify(v)),r(!1),m(v.role==="provider"?"dashboard":"home")},z=()=>{localStorage.removeItem(Q),l(null),m("home")},D=v=>{p(v),n(null)},I=v=>{p(`Marked interest for ${v.title}`)},c=()=>{if((s==null?void 0:s.role)==="provider")switch(i){case"events":return e.jsx(pe,{events:f,onInterested:I});case"settings":return e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-black text-slate-900",children:"Settings"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Provider settings coming soon..."})]});case"dashboard":default:return e.jsx(ds,{user:s})}switch(i){case"duas":return e.jsx(ms,{duas:b});case"events":return e.jsx(pe,{events:f,onInterested:I});case"home":default:return e.jsx(rs,{timings:w,points:y,onBook:n})}};return e.jsxs("div",{className:"min-h-screen bg-white pb-20 font-sans text-slate-900 selection:bg-emerald-100 sm:pb-16",children:[e.jsx(Ke,{user:s,onLogout:z,onJoinClick:()=>r(!0),address:j,isLocating:x,onRequestLocation:g}),e.jsx("main",{className:"mx-auto max-w-lg px-4 py-6 sm:max-w-2xl sm:px-6 sm:py-8",children:c()}),e.jsx(Je,{activeView:i,onViewChange:m,userRole:s==null?void 0:s.role}),a&&e.jsx(as,{onClose:()=>r(!1),onSuccess:C}),h&&e.jsx(ls,{point:h,onClose:()=>n(null),onSuccess:D}),e.jsx(xs,{message:N,onClose:()=>p(null)})]})}export{Ps as default};
