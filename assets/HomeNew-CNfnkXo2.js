import{j as e}from"./vendor-ui-B2jkoGl9.js";import{L as A,j as J,f as Se,k as ue,h as Ce,B as he,g as ze,H as De,l as Ie,m as Oe,n as Ae,P as Re,o as Pe,U as Ee,p as F,X as T,q as Me,r as Te,S as Le,s as me,t as V,u as Be,T as $e,v as Fe,w as qe}from"./vendor-other-WMI3Kuz0.js";import{a as s}from"./vendor-react-Cc-oBOCu.js";function Ge({user:t,onLogout:l,onJoinClick:a,address:n,isLocating:r,onRequestLocation:c}){return e.jsx("nav",{className:"sticky top-0 z-50 w-full border-b border-slate-100/50 bg-white/70 px-4 py-3 backdrop-blur-xl sm:px-6 sm:py-4",children:e.jsxs("div",{className:"mx-auto flex max-w-6xl items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-xl bg-emerald-600 text-lg font-black text-white shadow-lg shadow-emerald-100 sm:h-10 sm:w-10 sm:rounded-2xl sm:text-xl",children:"R"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-lg leading-none font-black tracking-tighter sm:text-xl",children:["RAMZAN",e.jsx("span",{className:"text-emerald-600",children:"IA"})]}),e.jsx("button",{onClick:c,className:"mt-0.5 flex items-center gap-1 text-[9px] font-bold tracking-wide text-slate-400 transition-colors hover:text-emerald-600",children:r?e.jsxs(e.Fragment,{children:[e.jsx(A,{size:8,className:"animate-spin"}),e.jsx("span",{children:"Locating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{size:8}),e.jsx("span",{className:"max-w-[120px] truncate sm:max-w-[180px]",children:(n==null?void 0:n.city)||(n==null?void 0:n.area)||"Set Location"})]})})]})]}),e.jsx("div",{className:"flex items-center gap-3 sm:gap-4",children:t?e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsxs("div",{className:"hidden text-right sm:block",children:[e.jsx("p",{className:"text-xs font-black text-slate-900",children:t.name}),e.jsx("p",{className:"text-[10px] font-bold text-emerald-600 uppercase",children:t.role})]}),e.jsx("button",{onClick:l,className:"flex h-9 w-9 items-center justify-center rounded-xl border border-slate-200 bg-slate-50 text-slate-400 transition-all hover:text-red-500 sm:h-10 sm:w-10 sm:rounded-2xl","aria-label":"Logout",children:e.jsx(Se,{size:16,className:"sm:h-[18px] sm:w-[18px]"})})]}):e.jsxs("button",{onClick:a,className:"flex items-center justify-center gap-1.5 rounded-xl bg-emerald-600 px-4 py-2 text-xs font-bold text-white shadow-lg shadow-emerald-100 transition-all hover:bg-emerald-700 active:scale-95 sm:gap-2 sm:rounded-2xl sm:px-5 sm:text-sm",children:[e.jsx(ue,{size:14,className:"sm:h-4 sm:w-4"}),"Join"]})})]})})}const _e=[{id:"home",label:"Home",icon:De},{id:"duas",label:"Duas",icon:Ie},{id:"events",label:"Events",icon:he}],Ue=[{id:"dashboard",label:"Dashboard",icon:Ce},{id:"events",label:"Events",icon:he},{id:"settings",label:"Settings",icon:ze}];function Ke({activeView:t,onViewChange:l,userRole:a="seeker"}){const n=a==="provider"?Ue:_e;return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:"fixed bottom-0 z-50 flex w-full items-center justify-around border-t border-slate-100 bg-white px-6 py-3 pb-6 shadow-[0_-10px_30px_rgba(0,0,0,0.03)] sm:hidden",children:n.map(r=>e.jsxs("button",{onClick:()=>l(r.id),className:`flex flex-col items-center gap-1 rounded-xl px-4 py-2 transition-all ${t===r.id?"bg-emerald-50 text-emerald-600":"text-slate-400 hover:text-slate-600"}`,"aria-label":r.label,children:[e.jsx(r.icon,{size:20}),e.jsx("span",{className:"text-[10px] font-bold",children:r.label})]},r.id))}),e.jsx("div",{className:"fixed bottom-6 left-1/2 z-50 hidden -translate-x-1/2 sm:block",children:e.jsx("div",{className:"flex gap-1 rounded-2xl bg-slate-950 p-1.5 text-white shadow-2xl shadow-slate-950/20",children:n.map(r=>e.jsx("button",{onClick:()=>l(r.id),className:`rounded-xl px-6 py-2.5 text-[10px] font-black tracking-wider uppercase transition-all ${t===r.id?"bg-emerald-600 text-white":"text-slate-400 hover:text-white"}`,children:r.label},r.id))})})]})}function He({time:t,compact:l=!1}){return e.jsxs("div",{className:`group relative overflow-hidden border-none bg-emerald-600 text-white shadow-sm transition-all duration-300 hover:shadow-lg hover:shadow-emerald-200/40 ${l?"rounded-2xl p-4":"rounded-[2.5rem] p-6"}`,children:[e.jsx(Oe,{size:l?60:100,className:"absolute -top-4 -right-4 text-emerald-500/30 transition-transform duration-500 group-hover:scale-110"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("span",{className:`block font-black tracking-wider text-emerald-200 uppercase ${l?"mb-1 text-[8px]":"mb-8 text-[10px]"}`,children:"Imsak (Sehar)"}),e.jsx("h4",{className:`font-black tracking-tight ${l?"text-3xl":"text-5xl"}`,children:t}),!l&&e.jsx("p",{className:"mt-1 text-sm font-medium text-emerald-100/80",children:"Stop eating and intend to fast."})]})]})}function Ve({time:t,compact:l=!1}){return e.jsxs("div",{className:`group relative overflow-hidden border-none bg-slate-950 text-white shadow-sm transition-all duration-300 hover:shadow-lg hover:shadow-slate-200/40 ${l?"rounded-2xl p-4":"rounded-[2.5rem] p-6"}`,children:[e.jsx(Ae,{size:l?60:100,className:"absolute -top-4 -right-4 text-slate-800/50 transition-transform duration-500 group-hover:rotate-12"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("span",{className:`block font-black tracking-wider text-slate-400 uppercase ${l?"mb-1 text-[8px]":"mb-8 text-[10px]"}`,children:"Maghrib (Iftar)"}),e.jsx("h4",{className:`font-black tracking-tight ${l?"text-3xl":"text-5xl"}`,children:t}),!l&&e.jsx("p",{className:"mt-1 text-sm font-medium text-slate-400/80",children:"Break your fast with the sun's set."})]})]})}function Ye({timings:t,compact:l=!1}){return e.jsxs("div",{className:`grid grid-cols-2 ${l?"gap-3":"gap-4"}`,children:[e.jsx(He,{time:t.sehar,compact:l}),e.jsx(Ve,{time:t.iftar,compact:l})]})}function Je({point:t,onBook:l,compact:a=!1}){return e.jsxs("div",{className:`flex flex-col border border-t-4 border-slate-100 border-t-emerald-500 bg-white shadow-sm transition-all duration-300 hover:shadow-lg hover:shadow-slate-200/40 ${a?"rounded-2xl p-4":"rounded-[2.5rem] p-6"}`,children:[e.jsxs("div",{className:`flex items-start justify-between ${a?"mb-3":"mb-6"}`,children:[e.jsx("h3",{className:`leading-tight font-black text-slate-900 ${a?"text-base":"text-xl"}`,children:t.name}),e.jsx("span",{className:`rounded-lg font-black uppercase ${a?"px-1.5 py-0.5 text-[8px]":"rounded-xl px-2 py-1 text-[9px]"} ${t.price===0?"bg-emerald-50 text-emerald-600":"bg-slate-100 text-slate-600"}`,children:t.price===0?"Free":`₹${t.price}`})]}),e.jsxs("div",{className:`flex-1 bg-slate-50 text-slate-600 italic ${a?"mb-3 rounded-xl p-3 text-xs leading-relaxed":"mb-6 rounded-2xl p-4 text-sm leading-relaxed"}`,children:['"',t.menu,'"']}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>window.open(`tel:${t.phone}`),className:`flex items-center justify-center gap-1.5 rounded-xl border border-slate-200 bg-white font-bold text-slate-700 transition-all hover:bg-slate-50 active:scale-95 ${a?"px-3 py-2 text-xs":"px-6 py-3.5 text-sm"}`,children:[e.jsx(Re,{size:a?12:16})," Call"]}),e.jsxs("button",{onClick:()=>window.open(`https://wa.me/${t.phone.replace(/\D/g,"")}`),className:`flex items-center justify-center gap-1.5 rounded-xl border border-emerald-100 bg-white font-bold text-emerald-600 transition-all hover:bg-emerald-50 active:scale-95 ${a?"px-3 py-2 text-xs":"px-6 py-3.5 text-sm"}`,children:[e.jsx(Pe,{size:a?12:16})," Chat"]})]}),e.jsx("button",{onClick:()=>l(t),disabled:!t.isBookable,className:`flex w-full items-center justify-center gap-2 rounded-xl bg-emerald-600 font-bold text-white shadow-lg shadow-emerald-100 transition-all hover:bg-emerald-700 active:scale-95 disabled:bg-emerald-300 disabled:opacity-50 ${a?"px-3 py-2 text-xs":"px-6 py-3.5 text-sm"}`,children:t.isBookable?"Confirm Spot":"Info Only"})]})]})}function We({dua:t}){return e.jsxs("div",{className:"space-y-6 rounded-[2.5rem] border border-slate-100 bg-white p-10 shadow-sm transition-all duration-500 hover:shadow-xl hover:shadow-slate-200/40",children:[e.jsx("h4",{className:"text-[10px] font-black tracking-widest text-emerald-600 uppercase",children:t.title}),e.jsx("p",{className:"text-right text-4xl leading-[1.8] font-bold text-slate-900",dir:"rtl",children:t.arabic}),e.jsxs("div",{className:"space-y-2 border-t border-slate-50 pt-6",children:[e.jsxs("p",{className:"text-sm font-bold text-emerald-700 italic",children:['"',t.transliteration,'"']}),e.jsx("p",{className:"text-sm font-medium text-slate-400",children:t.english})]})]})}function Qe({event:t,onInterested:l}){return e.jsxs("div",{className:"flex flex-col justify-between gap-6 rounded-[2.5rem] border border-slate-100 bg-white p-6 shadow-sm transition-all duration-500 hover:shadow-xl hover:shadow-emerald-100/30 md:flex-row md:items-center",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"rounded-full bg-emerald-50 px-3 py-1 text-[10px] font-black text-emerald-600 uppercase",children:t.date}),e.jsx("span",{className:"rounded-full bg-slate-50 px-3 py-1 text-[10px] font-black text-slate-400 uppercase",children:t.time})]}),e.jsx("h3",{className:"text-2xl font-black text-slate-900",children:t.title}),e.jsxs("p",{className:"text-sm font-medium text-slate-400",children:[e.jsx(J,{size:12,className:"mr-1 inline"})," ",t.location," • ",e.jsx(Ee,{size:12,className:"mr-1 inline"})," ",t.speaker]})]}),e.jsx("button",{onClick:()=>l==null?void 0:l(t),className:"flex items-center justify-center gap-2 rounded-2xl bg-slate-900 px-6 py-3.5 text-sm font-bold text-white transition-all hover:bg-slate-800 active:scale-95",children:"Interested"})]})}async function Xe(t,l){try{const n=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${t}&lon=${l}&zoom=18&addressdetails=1`,{headers:{"Accept-Language":"en"}})).json();if(n!=null&&n.address){const{road:r,suburb:c,neighbourhood:x,city:d,town:p,village:u,state_district:N,state:f,postcode:h,county:y}=n.address;return{street:r||"",area:c||x||y||"",city:d||p||u||N||"",pincode:h||"",state:f||""}}return null}catch(a){return console.error("Reverse geocoding failed:",a),null}}function Ze({onClose:t,onSuccess:l}){const[a,n]=s.useState("CHOICE"),[r,c]=s.useState(!1),[x,d]=s.useState(""),[p,u]=s.useState(""),[N,f]=s.useState(""),[h,y]=s.useState("seeker"),[v,m]=s.useState(""),[g,w]=s.useState(""),[k,I]=s.useState(""),[z,o]=s.useState(""),[b,C]=s.useState(""),[W,Q]=s.useState(""),[X,Z]=s.useState(""),[_,ee]=s.useState(""),[te,se]=s.useState(""),[ae,le]=s.useState(!1),[U,ne]=s.useState(""),[K,re]=s.useState(""),[oe,ie]=s.useState(""),[E,L]=s.useState(["","","","","",""]),[B,ce]=s.useState(""),H=s.useRef([]),de=s.useCallback(async()=>{if(navigator.geolocation){le(!0);try{const i=await new Promise(($,ke)=>{navigator.geolocation.getCurrentPosition($,ke,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),{latitude:j,longitude:S}=i.coords,O=await Xe(j,S);O&&(Q(O.street),Z(O.area),ee(O.city),se(O.pincode))}catch(i){console.log("Location fetch failed:",i.message)}finally{le(!1)}}},[]);s.useEffect(()=>{a==="REGISTER"&&de()},[a,de]);const pe=(i,j)=>{var $;const S=i.target.value;if(isNaN(S))return;const O=[...E];O[j]=S.slice(-1),L(O),S&&j<5&&(($=H.current[j+1])==null||$.focus())},fe=(i,j)=>{var S;i.key==="Backspace"&&!E[j]&&j>0&&((S=H.current[j-1])==null||S.focus())},ge=async i=>{i.preventDefault(),d(""),c(!0),await new Promise(j=>setTimeout(j,1e3)),p&&N.length>=4?l({email:p,name:p.split("@")[0],role:"seeker"}):d("Invalid email or password"),c(!1)},be=async i=>{if(i.preventDefault(),d(""),g.length<6){d("Password must be at least 6 characters");return}c(!0),await new Promise(j=>setTimeout(j,1e3)),c(!1),ce("register"),L(["","","","","",""]),n("OTP")},je=async i=>{if(i.preventDefault(),d(""),!U){d("Please enter your email");return}c(!0),await new Promise(j=>setTimeout(j,1e3)),c(!1),ce("forgot"),L(["","","","","",""]),n("OTP")},Ne=async()=>{if(!(E.join("").length<6)){if(d(""),c(!0),await new Promise(j=>setTimeout(j,1e3)),B==="register"){const j={email:v,name:k,contact:z,address:{street:W,area:X,city:_,pincode:te},role:h};h==="provider"&&(j.placeName=b),l(j)}else B==="forgot"&&n("RESET_PASSWORD");c(!1)}},ve=async i=>{if(i.preventDefault(),d(""),K.length<6){d("Password must be at least 6 characters");return}if(K!==oe){d("Passwords do not match");return}c(!0),await new Promise(j=>setTimeout(j,1e3)),c(!1),n("LOGIN"),d(""),ne(""),re(""),ie("")},ye=async()=>{c(!0),await new Promise(i=>setTimeout(i,1e3)),c(!1),L(["","","","","",""])},M="w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm font-medium outline-none transition-all focus:border-emerald-400 focus:ring-2 focus:ring-emerald-100",D="w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2.5 text-sm font-medium outline-none transition-all focus:border-emerald-400 focus:ring-2 focus:ring-emerald-100",R="flex w-full items-center justify-center gap-2 rounded-xl bg-emerald-600 px-4 py-3 text-sm font-bold text-white shadow-lg shadow-emerald-100 transition-all hover:bg-emerald-700 active:scale-[0.98] disabled:opacity-50",we={CHOICE:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-black tracking-tight text-slate-900",children:"Join Ramzania"}),e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Your portal to community Sehar & Iftar."}),e.jsxs("div",{className:"space-y-3 pt-2",children:[e.jsx("button",{className:R,onClick:()=>n("LOGIN"),children:"Sign In"}),e.jsx("button",{className:"flex w-full items-center justify-center gap-2 rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm font-bold text-slate-700 transition-all hover:bg-slate-50 active:scale-[0.98]",onClick:()=>n("REGISTER"),children:"Create Account"})]})]}),LOGIN:e.jsxs("form",{onSubmit:ge,className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>n("CHOICE"),className:"-ml-2 p-2 text-slate-400 hover:text-slate-600",children:e.jsx(F,{size:18})}),e.jsx("h2",{className:"text-xl font-black text-slate-900",children:"Sign In"})]}),x&&e.jsx("p",{className:"rounded-lg bg-red-50 px-3 py-2 text-xs font-medium text-red-600",children:x}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"email",required:!0,placeholder:"Email address",className:M,value:p,onChange:i=>u(i.target.value)}),e.jsx("input",{type:"password",required:!0,placeholder:"Password",className:M,value:N,onChange:i=>f(i.target.value)})]}),e.jsx("button",{type:"submit",disabled:r,className:R,children:r?e.jsx(A,{className:"animate-spin",size:18}):"Sign In"}),e.jsx("button",{type:"button",onClick:()=>n("FORGOT"),className:"w-full text-center text-[10px] font-bold tracking-wide text-slate-400 uppercase hover:text-emerald-600",children:"Forgot Password?"})]}),REGISTER:e.jsxs("form",{onSubmit:be,className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>n("CHOICE"),className:"-ml-2 p-2 text-slate-400 hover:text-slate-600",children:e.jsx(F,{size:18})}),e.jsx("h2",{className:"text-xl font-black text-slate-900",children:"Create Account"})]}),x&&e.jsx("p",{className:"rounded-lg bg-red-50 px-3 py-2 text-xs font-medium text-red-600",children:x}),e.jsxs("div",{className:"flex rounded-xl bg-slate-100 p-1",children:[e.jsx("button",{type:"button",onClick:()=>y("seeker"),className:`flex-1 rounded-lg py-2.5 text-xs font-bold transition-all ${h==="seeker"?"bg-white text-emerald-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Seeker"}),e.jsx("button",{type:"button",onClick:()=>y("provider"),className:`flex-1 rounded-lg py-2.5 text-xs font-bold transition-all ${h==="provider"?"bg-white text-emerald-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Provider"})]}),e.jsx("p",{className:"text-[10px] font-medium text-slate-400",children:h==="seeker"?"Search & book Sehar/Iftar places near you":"Add & manage your Sehar/Iftar distribution points"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"email",required:!0,placeholder:"Email address",className:D,value:v,onChange:i=>m(i.target.value)}),e.jsx("input",{type:"password",required:!0,placeholder:"Password (min 6 chars)",className:D,value:g,onChange:i=>w(i.target.value)}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",required:!0,placeholder:"Full Name",className:D,value:k,onChange:i=>I(i.target.value)}),e.jsx("input",{type:"tel",required:!0,placeholder:"Contact Number",className:D,value:z,onChange:i=>o(i.target.value)})]}),h==="provider"&&e.jsx("input",{type:"text",required:!0,placeholder:"Place Name (e.g., Restaurant, Masjid,..)",className:D,value:b,onChange:i=>C(i.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500",children:"Address Details"}),ae&&e.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-medium text-emerald-600",children:[e.jsx(A,{size:10,className:"animate-spin"}),"Fetching location..."]}),!ae&&_&&e.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-medium text-emerald-600",children:[e.jsx(J,{size:10}),"Auto-filled"]})]}),e.jsx("input",{type:"text",required:!0,placeholder:"Street / Door No",className:D,value:W,onChange:i=>Q(i.target.value)}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",required:!0,placeholder:"Area / Locality",className:D,value:X,onChange:i=>Z(i.target.value)}),e.jsx("input",{type:"text",required:!0,placeholder:"City",className:D,value:_,onChange:i=>ee(i.target.value)})]}),e.jsx("input",{type:"text",required:!0,placeholder:"Pincode",className:D,value:te,onChange:i=>se(i.target.value)})]}),e.jsx("button",{type:"submit",disabled:r,className:R,children:r?e.jsx(A,{className:"animate-spin",size:18}):"Continue →"})]}),FORGOT:e.jsxs("form",{onSubmit:je,className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>n("LOGIN"),className:"-ml-2 p-2 text-slate-400 hover:text-slate-600",children:e.jsx(F,{size:18})}),e.jsx("h2",{className:"text-xl font-black text-slate-900",children:"Reset Password"})]}),e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Enter your email to receive a verification code."}),x&&e.jsx("p",{className:"rounded-lg bg-red-50 px-3 py-2 text-xs font-medium text-red-600",children:x}),e.jsx("input",{type:"email",required:!0,placeholder:"Registered email",className:M,value:U,onChange:i=>ne(i.target.value)}),e.jsx("button",{type:"submit",disabled:r,className:R,children:r?e.jsx(A,{className:"animate-spin",size:18}):"Send OTP"})]}),OTP:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>n(B==="register"?"REGISTER":"FORGOT"),className:"-ml-2 p-2 text-slate-400 hover:text-slate-600",children:e.jsx(F,{size:18})}),e.jsx("h2",{className:"text-xl font-black text-slate-900",children:"Verify Email"})]}),e.jsxs("p",{className:"text-sm font-medium text-slate-500",children:["Enter the 6-digit code sent to ",e.jsx("span",{className:"font-bold text-slate-700",children:B==="register"?v:U})]}),x&&e.jsx("p",{className:"rounded-lg bg-red-50 px-3 py-2 text-xs font-medium text-red-600",children:x}),e.jsx("div",{className:"flex justify-between gap-2",children:E.map((i,j)=>e.jsx("input",{ref:S=>H.current[j]=S,type:"text",inputMode:"numeric",maxLength:1,className:"h-12 w-full rounded-xl border border-slate-200 bg-slate-50 text-center text-lg font-bold transition-all outline-none focus:border-emerald-400 focus:ring-2 focus:ring-emerald-100",value:i,onChange:S=>pe(S,j),onKeyDown:S=>fe(S,j)},j))}),e.jsx("button",{type:"button",onClick:Ne,disabled:r||E.join("").length<6,className:R,children:r?e.jsx(A,{className:"animate-spin",size:18}):"Verify"}),e.jsx("button",{type:"button",onClick:ye,disabled:r,className:"w-full text-center text-[10px] font-bold tracking-wide text-slate-400 uppercase hover:text-emerald-600",children:"Resend Code"})]}),RESET_PASSWORD:e.jsxs("form",{onSubmit:ve,className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{size:20,className:"text-emerald-600"}),e.jsx("h2",{className:"text-xl font-black text-slate-900",children:"New Password"})]}),e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Create a new password for your account."}),x&&e.jsx("p",{className:"rounded-lg bg-red-50 px-3 py-2 text-xs font-medium text-red-600",children:x}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"password",required:!0,placeholder:"New Password (min 6 chars)",className:M,value:K,onChange:i=>re(i.target.value)}),e.jsx("input",{type:"password",required:!0,placeholder:"Confirm Password",className:M,value:oe,onChange:i=>ie(i.target.value)})]}),e.jsx("button",{type:"submit",disabled:r,className:R,children:r?e.jsx(A,{className:"animate-spin",size:18}):"Reset Password"})]})};return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-end justify-center bg-slate-900/40 p-4 backdrop-blur-sm sm:items-center",children:e.jsxs("div",{className:"animate-in slide-in-from-bottom-4 w-full max-w-md rounded-2xl border border-slate-100 bg-white p-6 shadow-xl sm:rounded-3xl sm:p-8",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-emerald-50 text-emerald-600",children:e.jsx(ue,{size:20})}),e.jsx("button",{onClick:t,className:"rounded-full p-2 text-slate-300 transition-all hover:bg-slate-100 hover:text-slate-500",children:e.jsx(T,{size:18})})]}),we[a]]})})}function et({point:t,onClose:l,onSuccess:a}){const[n,r]=s.useState(!1),[c,x]=s.useState({name:"",email:"",phone:"",persons:1}),d=N=>{const{name:f,value:h}=N.target;x(y=>({...y,[f]:h}))},p=async N=>{N.preventDefault(),r(!0),await new Promise(f=>setTimeout(f,500)),r(!1),a(`Spot booked at ${t.name}!`)},u="w-full rounded-2xl border-none bg-slate-50 px-6 py-4 font-bold outline-none focus:ring-2 focus:ring-emerald-500";return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-end justify-center bg-slate-900/30 p-4 backdrop-blur-sm sm:items-center",children:e.jsxs("div",{className:"animate-in slide-in-from-bottom-10 w-full max-w-md rounded-[2.5rem] border border-slate-100 bg-white p-8 shadow-sm",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("h2",{className:"text-3xl font-black tracking-tight text-slate-900",children:["Book ",e.jsx("span",{className:"text-emerald-600",children:"Spot"})]}),e.jsx("button",{onClick:l,className:"rounded-full p-2 text-slate-400 hover:bg-slate-50",children:e.jsx(T,{size:20})})]}),e.jsxs("div",{className:"mb-6 rounded-2xl bg-emerald-50 p-4",children:[e.jsx("p",{className:"text-sm font-black text-emerald-800",children:t.name}),e.jsxs("p",{className:"text-xs text-emerald-600",children:[t.area," • ",t.timing]})]}),e.jsxs("form",{className:"space-y-4",onSubmit:p,children:[e.jsx("input",{required:!0,type:"text",name:"name",placeholder:"Full Name",className:u,value:c.name,onChange:d}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{required:!0,type:"email",name:"email",placeholder:"Email",className:u,value:c.email,onChange:d}),e.jsx("input",{required:!0,type:"tel",name:"phone",placeholder:"Mobile",className:u,value:c.phone,onChange:d})]}),e.jsx("input",{required:!0,type:"number",name:"persons",placeholder:"No. of Persons",min:"1",max:"5",className:u,value:c.persons,onChange:d}),e.jsx("button",{type:"submit",disabled:n,className:"mt-4 flex w-full items-center justify-center gap-2 rounded-2xl bg-emerald-600 px-6 py-3.5 text-sm font-bold text-white shadow-lg shadow-emerald-100 transition-all hover:bg-emerald-700 active:scale-95 disabled:opacity-50",children:n?e.jsx(A,{className:"animate-spin",size:20}):"Confirm Reservation"})]})]})})}function tt({timings:t,points:l,onBook:a}){const[n,r]=s.useState(""),c=l.filter(x=>x.name.toLowerCase().includes(n.toLowerCase())||x.menu.toLowerCase().includes(n.toLowerCase()));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"mb-3 text-sm font-black tracking-tight text-slate-900",children:"Today's Timings"}),e.jsx(Ye,{timings:t,compact:!0})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Te,{size:16,className:"text-emerald-600"}),e.jsx("h2",{className:"text-sm font-black tracking-tight text-slate-900",children:"Food Points"})]}),e.jsxs("span",{className:"rounded-lg bg-slate-100 px-2 py-0.5 text-xs font-bold text-slate-600",children:[c.length," nearby"]})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(Le,{size:16,className:"absolute top-1/2 left-3 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search food points...",value:n,onChange:x=>r(x.target.value),className:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pr-4 pl-9 text-sm font-medium text-slate-900 placeholder:text-slate-400 focus:border-emerald-300 focus:ring-2 focus:ring-emerald-100 focus:outline-none"})]}),c.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:c.map(x=>e.jsx(Je,{point:x,onBook:a,compact:!0},x.id))}):e.jsxs("div",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50 py-8 text-center",children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"No food points found"}),e.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"Try a different search term"})]})]})]})}const st=[{id:1,userName:"Ahmed Khan",userPhone:"+91 98765 43210",date:new Date().toISOString(),ramzanDay:5,guests:4,mealType:"Iftar",status:"confirmed"},{id:2,userName:"Fatima Begum",userPhone:"+91 87654 32109",date:new Date(Date.now()-864e5).toISOString(),ramzanDay:4,guests:2,mealType:"Sehar",status:"completed"},{id:3,userName:"Mohammad Ali",userPhone:"+91 76543 21098",date:new Date().toISOString(),ramzanDay:5,guests:6,mealType:"Iftar",status:"pending"}],at=[{id:1,ramzanDay:5,menu:"Biryani, Kheer, Dates, Rooh Afza",mealType:"iftar",capacity:100,price:"free",bookedCount:45},{id:2,ramzanDay:6,menu:"Haleem, Fruit Chaat, Sharbat",mealType:"iftar",capacity:80,price:"free",bookedCount:12},{id:3,ramzanDay:7,menu:"Nihari, Naan, Chai",mealType:"sehar",capacity:50,price:"free",bookedCount:0}];function lt({onClose:t,onSave:l,editingPoint:a}){var m,g;const[n,r]=s.useState(((m=a==null?void 0:a.ramzanDay)==null?void 0:m.toString())||"1"),[c,x]=s.useState((a==null?void 0:a.menu)||""),[d,p]=s.useState((a==null?void 0:a.mealType)||"iftar"),[u,N]=s.useState(((g=a==null?void 0:a.capacity)==null?void 0:g.toString())||"50"),[f,h]=s.useState((a==null?void 0:a.price)||"free"),y="w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm font-medium outline-none transition-all focus:border-emerald-400 focus:ring-2 focus:ring-emerald-100",v=w=>{w.preventDefault(),l({id:(a==null?void 0:a.id)||Date.now(),ramzanDay:Number.parseInt(n),menu:c,mealType:d,capacity:Number.parseInt(u)||50,price:f,bookedCount:(a==null?void 0:a.bookedCount)||0}),t()};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-end justify-center bg-slate-900/40 p-4 backdrop-blur-sm sm:items-center",children:e.jsxs("div",{className:"animate-in slide-in-from-bottom-4 sm:slide-in-from-bottom-0 sm:zoom-in-95 w-full max-w-md rounded-2xl bg-white p-6 shadow-xl",children:[e.jsxs("div",{className:"mb-5 flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-black text-slate-900",children:[a?"Edit":"Add"," Food Offering"]}),e.jsx("button",{onClick:t,className:"rounded-full p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:e.jsx(T,{size:18})})]}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-bold text-slate-500",children:"Ramzan Day"}),e.jsx("select",{value:n,onChange:w=>r(w.target.value),className:y,disabled:!!a,children:Array.from({length:30},(w,k)=>e.jsxs("option",{value:k+1,children:[k+1,k===0?"st":k===1?"nd":k===2?"rd":"th"," Ramzan"]},k+1))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-bold text-slate-500",children:"Meal Type"}),e.jsxs("select",{value:d,onChange:w=>p(w.target.value),className:y,children:[e.jsx("option",{value:"iftar",children:"Iftar"}),e.jsx("option",{value:"sehar",children:"Sehar"}),e.jsx("option",{value:"both",children:"Both"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-bold text-slate-500",children:"Menu Items"}),e.jsx("textarea",{required:!0,placeholder:"e.g., Biryani, Kheer, Dates, Rooh Afza...",className:y+" resize-none",rows:2,value:c,onChange:w=>x(w.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-bold text-slate-500",children:"Capacity"}),e.jsx("input",{type:"number",required:!0,min:"1",placeholder:"People",className:y,value:u,onChange:w=>N(w.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-bold text-slate-500",children:"Price"}),e.jsxs("select",{value:f,onChange:w=>h(w.target.value),className:y,children:[e.jsx("option",{value:"free",children:"Free"}),e.jsx("option",{value:"paid",children:"Paid"})]})]})]}),e.jsxs("button",{type:"submit",className:"flex w-full items-center justify-center gap-2 rounded-xl bg-emerald-600 py-3 text-sm font-bold text-white shadow-lg shadow-emerald-100 transition-all hover:bg-emerald-700 active:scale-[0.98]",children:[a?"Update":"Add"," Offering"]})]})]})})}function nt({onClose:t,onSave:l}){const[a,n]=s.useState(""),[r,c]=s.useState(""),[x,d]=s.useState("1"),[p,u]=s.useState("iftar"),[N,f]=s.useState("1"),h="w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm font-medium outline-none transition-all focus:border-emerald-400 focus:ring-2 focus:ring-emerald-100",y=v=>{v.preventDefault(),l({id:Date.now(),userName:a,userPhone:r,guests:Number.parseInt(x)||1,mealType:p.charAt(0).toUpperCase()+p.slice(1),ramzanDay:Number.parseInt(N),date:new Date().toISOString(),status:"confirmed"}),t()};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-end justify-center bg-slate-900/40 p-4 backdrop-blur-sm sm:items-center",children:e.jsxs("div",{className:"animate-in slide-in-from-bottom-4 sm:slide-in-from-bottom-0 sm:zoom-in-95 w-full max-w-md rounded-2xl bg-white p-6 shadow-xl",children:[e.jsxs("div",{className:"mb-5 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-black text-slate-900",children:"Add Booking"}),e.jsx("button",{onClick:t,className:"rounded-full p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:e.jsx(T,{size:18})})]}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsx("input",{type:"text",required:!0,placeholder:"Guest Name",className:h,value:a,onChange:v=>n(v.target.value)}),e.jsx("input",{type:"tel",required:!0,placeholder:"Phone Number",className:h,value:r,onChange:v=>c(v.target.value)}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"number",required:!0,min:"1",placeholder:"No. of Guests",className:h,value:x,onChange:v=>d(v.target.value)}),e.jsxs("select",{value:p,onChange:v=>u(v.target.value),className:h,children:[e.jsx("option",{value:"iftar",children:"Iftar"}),e.jsx("option",{value:"sehar",children:"Sehar"}),e.jsx("option",{value:"both",children:"Both"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-bold text-slate-500",children:"Ramzan Day"}),e.jsx("select",{value:N,onChange:v=>f(v.target.value),className:h,children:Array.from({length:30},(v,m)=>e.jsxs("option",{value:m+1,children:[m+1,m===0?"st":m===1?"nd":m===2?"rd":"th"," Ramzan"]},m+1))})]}),e.jsx("button",{type:"submit",className:"flex w-full items-center justify-center gap-2 rounded-xl bg-emerald-600 py-3 text-sm font-bold text-white shadow-lg shadow-emerald-100 transition-all hover:bg-emerald-700 active:scale-[0.98]",children:"Add Booking"})]})]})})}function rt({user:t}){const[l,a]=s.useState("offerings"),[n,r]=s.useState(!1),[c,x]=s.useState(!1),[d,p]=s.useState(null),[u,N]=s.useState(at),[f,h]=s.useState(st),y=u.length,v=f.length,m=f.filter(o=>o.status==="pending").length,g=o=>{N(d?b=>b.map(C=>C.id===o.id?o:C):b=>[...b,o]),p(null)},w=o=>{window.confirm("Delete this food offering?")&&N(b=>b.filter(C=>C.id!==o))},k=o=>{h(b=>[o,...b])},I=o=>{switch(o){case"confirmed":return"bg-emerald-50 text-emerald-600";case"pending":return"bg-amber-50 text-amber-600";case"completed":return"bg-slate-100 text-slate-500";default:return"bg-slate-100 text-slate-500"}},z=o=>{const b=["th","st","nd","rd"],C=o%100;return o+(b[(C-20)%10]||b[C]||b[0])};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-black text-slate-900",children:"Provider Dashboard"}),e.jsx("p",{className:"text-xs font-medium text-slate-500",children:(t==null?void 0:t.placeName)||"Manage your Ramzan offerings"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"rounded-xl bg-emerald-50 p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-black text-emerald-600",children:y}),e.jsx("p",{className:"text-[10px] font-bold text-emerald-700 uppercase",children:"Offerings"})]}),e.jsxs("div",{className:"rounded-xl bg-slate-100 p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-black text-slate-700",children:v}),e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Bookings"})]}),e.jsxs("div",{className:"rounded-xl bg-amber-50 p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-black text-amber-600",children:m}),e.jsx("p",{className:"text-[10px] font-bold text-amber-700 uppercase",children:"Pending"})]})]}),e.jsxs("div",{className:"flex rounded-xl bg-slate-100 p-1",children:[e.jsx("button",{onClick:()=>a("offerings"),className:`flex-1 rounded-lg py-2 text-xs font-bold transition-all ${l==="offerings"?"bg-white text-emerald-600 shadow-sm":"text-slate-500"}`,children:"Food Offerings"}),e.jsx("button",{onClick:()=>a("bookings"),className:`flex-1 rounded-lg py-2 text-xs font-bold transition-all ${l==="bookings"?"bg-white text-emerald-600 shadow-sm":"text-slate-500"}`,children:"Bookings"})]}),l==="offerings"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-sm font-bold text-slate-700",children:"My Offerings"}),e.jsxs("button",{onClick:()=>{p(null),r(!0)},className:"flex items-center gap-1.5 rounded-lg bg-emerald-600 px-3 py-2 text-xs font-bold text-white transition-all hover:bg-emerald-700 active:scale-95",children:[e.jsx(me,{size:14}),"Add Day"]})]}),e.jsx("div",{className:"space-y-3",children:u.length>0?u.sort((o,b)=>o.ramzanDay-b.ramzanDay).map(o=>e.jsxs("div",{className:"rounded-xl border border-slate-100 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"rounded-lg bg-emerald-100 px-2 py-1 text-xs font-black text-emerald-700",children:[z(o.ramzanDay)," Ramzan"]}),e.jsx("span",{className:"ml-2 rounded bg-slate-100 px-1.5 py-0.5 text-[9px] font-bold text-slate-600 uppercase",children:o.mealType})]}),e.jsx("span",{className:`rounded-lg px-2 py-0.5 text-[9px] font-black uppercase ${o.price==="free"?"bg-emerald-50 text-emerald-600":"bg-slate-100 text-slate-600"}`,children:o.price})]}),e.jsxs("p",{className:"mt-2 text-xs text-slate-600 italic",children:['"',o.menu,'"']}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(V,{size:10}),o.bookedCount,"/",o.capacity]}),e.jsx("span",{className:`${o.bookedCount>=o.capacity?"text-red-500":"text-emerald-600"}`,children:o.bookedCount>=o.capacity?"Full":`${o.capacity-o.bookedCount} left`})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>{p(o),r(!0)},className:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:e.jsx(Be,{size:14})}),e.jsx("button",{onClick:()=>w(o.id),className:"rounded-lg p-1.5 text-slate-400 hover:bg-red-50 hover:text-red-500",children:e.jsx($e,{size:14})})]})]})]},o.id)):e.jsxs("div",{className:"rounded-xl border border-dashed border-slate-200 bg-slate-50 py-12 text-center",children:[e.jsx(Fe,{size:32,className:"mx-auto mb-3 text-slate-300"}),e.jsx("p",{className:"font-bold text-slate-500",children:"No offerings yet"}),e.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"Add food offerings for specific Ramzan days"})]})})]}),l==="bookings"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-sm font-bold text-slate-700",children:"Bookings"}),e.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-1.5 rounded-lg bg-emerald-600 px-3 py-2 text-xs font-bold text-white transition-all hover:bg-emerald-700 active:scale-95",children:[e.jsx(me,{size:14}),"Add Booking"]})]}),e.jsx("div",{className:"space-y-3",children:f.length>0?f.map(o=>e.jsxs("div",{className:"rounded-xl border border-slate-100 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-900",children:o.userName}),e.jsx("p",{className:"text-xs text-slate-500",children:o.userPhone})]}),e.jsx("span",{className:`rounded-lg px-2 py-1 text-[10px] font-bold capitalize ${I(o.status)}`,children:o.status})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-xs text-slate-500",children:[e.jsxs("span",{className:"rounded bg-emerald-100 px-1.5 py-0.5 text-[9px] font-bold text-emerald-700",children:[z(o.ramzanDay)," Ramzan"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(V,{size:12}),o.guests," guests"]}),e.jsx("span",{className:"rounded bg-slate-100 px-1.5 py-0.5 text-[9px] font-bold text-slate-600",children:o.mealType})]})]},o.id)):e.jsxs("div",{className:"rounded-xl border border-dashed border-slate-200 bg-slate-50 py-12 text-center",children:[e.jsx(V,{size:32,className:"mx-auto mb-3 text-slate-300"}),e.jsx("p",{className:"font-bold text-slate-500",children:"No bookings yet"}),e.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"Add your first booking or wait for seekers to reserve"})]})})]}),n&&e.jsx(lt,{onClose:()=>r(!1),onSave:g,editingPoint:d}),c&&e.jsx(nt,{onClose:()=>x(!1),onSave:k})]})}function ot({duas:t}){return e.jsxs("div",{className:"space-y-12",children:[e.jsxs("h2",{className:"text-5xl font-black tracking-tighter text-slate-950 md:text-7xl",children:["Daily ",e.jsx("span",{className:"text-emerald-600",children:"Duas."})]}),e.jsx("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2",children:t.map(l=>e.jsx(We,{dua:l},l.id))}),t.length===0&&e.jsx("div",{className:"py-12 text-center",children:e.jsx("p",{className:"text-lg font-bold text-slate-400",children:"No duas available"})})]})}function xe({events:t,onInterested:l}){return e.jsxs("div",{className:"space-y-12",children:[e.jsxs("h2",{className:"text-5xl font-black tracking-tighter text-slate-950 md:text-7xl",children:["Community ",e.jsx("span",{className:"text-emerald-600",children:"Events."})]}),e.jsx("div",{className:"space-y-4",children:t.map(a=>e.jsx(Qe,{event:a,onInterested:l},a.id))}),t.length===0&&e.jsxs("div",{className:"py-12 text-center",children:[e.jsx("p",{className:"text-lg font-bold text-slate-400",children:"No events scheduled"}),e.jsx("p",{className:"text-sm text-slate-300",children:"Check back later for upcoming events"})]})]})}function it({message:t,onClose:l}){return t?e.jsxs("div",{className:"animate-in fade-in slide-in-from-top-10 fixed top-8 left-1/2 z-[200] flex -translate-x-1/2 items-center gap-3 rounded-full bg-slate-950 px-8 py-4 text-white shadow-2xl",children:[e.jsx(qe,{className:"text-emerald-400",size:18}),e.jsx("span",{className:"text-sm font-black tracking-tight",children:t}),e.jsx("button",{onClick:l,className:"text-slate-500 transition-colors hover:text-white",children:e.jsx(T,{size:16})})]}):null}const q="ramzania_user_location";async function ct(t,l){try{const n=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${t}&lon=${l}&zoom=14&addressdetails=1`,{headers:{"Accept-Language":"en"}})).json();if(n&&n.address){const{suburb:r,neighbourhood:c,city:x,town:d,village:p,state_district:u,state:N,country:f}=n.address;return{raw:n,area:r||c||x||d||p||u||""||"Unknown Area",fullAddress:n.display_name||"",city:x||d||p||u||"",state:N||"",country:f||"",addressDetails:n.address}}return null}catch(a){return console.error("Reverse geocoding failed:",a),null}}function dt(){const[t,l]=s.useState(null),[a,n]=s.useState(null),[r,c]=s.useState(!1),[x,d]=s.useState(null),[p,u]=s.useState("prompt");s.useEffect(()=>{navigator.permissions&&navigator.permissions.query({name:"geolocation"}).then(m=>{u(m.state),m.onchange=()=>{u(m.state)}})},[]),s.useEffect(()=>{const m=localStorage.getItem(q);if(m)try{const g=JSON.parse(m);g.lat&&g.lng&&l({lat:g.lat,lng:g.lng}),g.address&&n(g.address)}catch{localStorage.removeItem(q)}},[]),s.useEffect(()=>{p==="granted"&&!t&&f()},[p]);const N=s.useCallback((m,g)=>{l(m),n(g),localStorage.setItem(q,JSON.stringify({lat:m.lat,lng:m.lng,address:g,timestamp:Date.now()}))},[]),f=s.useCallback(async()=>{if(!navigator.geolocation){d("Geolocation is not supported");return}c(!0),d(null),navigator.geolocation.getCurrentPosition(async m=>{const g={lat:m.coords.latitude,lng:m.coords.longitude},w=await ct(g.lat,g.lng);N(g,w),c(!1)},m=>{m.code===m.PERMISSION_DENIED?(d("Location permission denied"),u("denied")):m.code===m.POSITION_UNAVAILABLE?d("Location unavailable"):m.code===m.TIMEOUT?d("Location request timed out"):d("Enable GPS to see distance"),c(!1)},{timeout:1e4,enableHighAccuracy:!0})},[N]),h=s.useCallback(()=>{f()},[f]),y=s.useCallback((m,g)=>{if(!t)return null;const w=6371,k=(m-t.lat)*Math.PI/180,I=(g-t.lng)*Math.PI/180,z=Math.sin(k/2)*Math.sin(k/2)+Math.cos(t.lat*Math.PI/180)*Math.cos(m*Math.PI/180)*Math.sin(I/2)*Math.sin(I/2),o=2*Math.atan2(Math.sqrt(z),Math.sqrt(1-z));return w*o},[t]),v=s.useCallback(()=>{l(null),n(null),localStorage.removeItem(q)},[]);return{location:t,address:a,isLocating:r,error:x,permissionStatus:p,requestLocation:h,calculateDistance:y,clearLocation:v}}const P=t=>new Promise(l=>setTimeout(l,t)),mt=async()=>(await P(300),[{id:1,name:"Masjid-e-Noor",area:"T. Nagar",lat:13.0405,lng:80.2337,slots:25,menu:"Mutton Kanji, Dates & Fruit Salad",phone:"+919000000001",timing:"3:30 AM - 4:15 AM",price:0,isBookable:!0,type:"Sehar"},{id:2,name:"Triplicane Big Masjid",area:"Triplicane",lat:13.0601,lng:80.2747,slots:150,menu:"Beef Kanji & Tea",phone:"+919000000002",timing:"6:35 PM (Iftar)",price:0,isBookable:!1,type:"Iftar"},{id:3,name:"Ambur Private Kitchen",area:"Mount Road",lat:13.0645,lng:80.2594,slots:40,menu:"Biryani & Lemon Juice",phone:"+919000000003",timing:"3:15 AM - 4:00 AM",price:120,isBookable:!0,type:"Sehar"}]),xt=async()=>(await P(200),[{id:1,title:"Dua for Suhoor",arabic:"وَبِصَوْمِ غَدٍ نَّوَيْتُ مِنْ شَهْرِ رَمَضَانَ",transliteration:"Wa bi-sawmi ghadinn nawaitu min shahri ramadan",english:"I intend to keep the fast for tomorrow in the month of Ramadan."},{id:2,title:"Dua for Iftar",arabic:"اللَّهُمَّ إِنِّي لَكَ صُمْتُ وَبِكَ آمَنْتُ وَعَلَيْكَ تَوَكَّلْتُ وَعَلَى رِزْقِكَ أَفْطَرْتُ",transliteration:"Allahumma inni laka sumtu, wa bika aamantu, wa 'alayka tawakkaltu, wa 'ala rizqika aftartu",english:"O Allah! I fasted for You and I believe in You and I put my trust in You and I break my fast with Your sustenance."}]),ut=async()=>(await P(200),[{id:1,title:"Ramzan Lecture Series",location:"Anna Nagar Masjid",date:"Feb 15, 2026",time:"10:30 PM",speaker:"Shaykh Abdullah",description:"A series on the virtues of the last 10 days."},{id:2,title:"Community Iftar Meet",location:"Marina Beach",date:"Feb 12, 2026",time:"6:00 PM",speaker:"Open Event",description:"Bachelors meet-up for a shared Iftar experience."}]),ht=async(t="Chennai")=>(await P(100),{sehar:"4:52 AM",iftar:"6:24 PM",area:t}),pt=async(t,l)=>(await P(1e3),{success:!0,user:{email:t,role:t.includes("admin")?"admin":"seeker",name:t.split("@")[0],token:"token-"+Date.now()}}),ft=async(t,l)=>(await P(500),{success:!0,bookingId:`BK-${Date.now()}`,message:"Spot booked successfully!"}),G={fetchPoints:mt,fetchDuas:xt,fetchEvents:ut,fetchTimings:ht,login:pt,bookSpot:ft};function gt(){const[t,l]=s.useState([]),[a,n]=s.useState([]),[r,c]=s.useState([]),[x,d]=s.useState({sehar:"04:52 AM",iftar:"06:24 PM",area:"Chennai"}),[p,u]=s.useState(!0),[N,f]=s.useState(null),h=s.useCallback(async()=>{u(!0),f(null);try{const[y,v,m,g]=await Promise.all([G.fetchPoints(),G.fetchDuas(),G.fetchEvents(),G.fetchTimings()]);l(y),n(v),c(m),d(g)}catch(y){f(y.message||"Failed to fetch data")}finally{u(!1)}},[]);return s.useEffect(()=>{h()},[h]),{points:t,duas:a,events:r,timings:x,loading:p,error:N,refetch:h}}const Y="ramzania_user";function yt(){const[t,l]=s.useState(null),[a,n]=s.useState(!1),[r,c]=s.useState("home"),[x,d]=s.useState(null),[p,u]=s.useState(null),{points:N,duas:f,events:h,timings:y}=gt(),{address:v,isLocating:m,requestLocation:g}=dt();s.useEffect(()=>{const b=localStorage.getItem(Y);if(b){const C=JSON.parse(b);l(C),c(C.role==="provider"?"dashboard":"home")}},[]);const w=b=>{l(b),localStorage.setItem(Y,JSON.stringify(b)),n(!1),c(b.role==="provider"?"dashboard":"home")},k=()=>{localStorage.removeItem(Y),l(null),c("home")},I=b=>{u(b),d(null)},z=b=>{u(`Marked interest for ${b.title}`)},o=()=>{if((t==null?void 0:t.role)==="provider")switch(r){case"events":return e.jsx(xe,{events:h,onInterested:z});case"settings":return e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-black text-slate-900",children:"Settings"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Provider settings coming soon..."})]});case"dashboard":default:return e.jsx(rt,{user:t})}switch(r){case"duas":return e.jsx(ot,{duas:f});case"events":return e.jsx(xe,{events:h,onInterested:z});case"home":default:return e.jsx(tt,{timings:y,points:N,onBook:d})}};return e.jsxs("div",{className:"min-h-screen bg-white pb-20 font-sans text-slate-900 selection:bg-emerald-100 sm:pb-16",children:[e.jsx(Ge,{user:t,onLogout:k,onJoinClick:()=>n(!0),address:v,isLocating:m,onRequestLocation:g}),e.jsx("main",{className:"mx-auto max-w-lg px-4 py-6 sm:max-w-2xl sm:px-6 sm:py-8",children:o()}),e.jsx(Ke,{activeView:r,onViewChange:c,userRole:t==null?void 0:t.role}),a&&e.jsx(Ze,{onClose:()=>n(!1),onSuccess:w}),x&&e.jsx(et,{point:x,onClose:()=>d(null),onSuccess:I}),e.jsx(it,{message:p,onClose:()=>u(null)})]})}export{yt as default};
