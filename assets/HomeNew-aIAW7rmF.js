import{j as e}from"./vendor-ui-B2jkoGl9.js";import{f as q,j as T,H as F,B as G,k as _,l as H,m as U,P as V,n as J,o as A,U as K,X as D,p as O,L,N as Y,q as Q,S as W,r as X}from"./vendor-other-BSOlB7vU.js";import{a as l}from"./vendor-react-Cc-oBOCu.js";function Z({user:t,onLogout:s,onJoinClick:a}){return e.jsx("nav",{className:"sticky top-0 z-50 w-full border-b border-slate-100/50 bg-white/70 px-6 py-4 backdrop-blur-xl",children:e.jsxs("div",{className:"mx-auto flex max-w-6xl items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-2xl bg-emerald-600 text-xl font-black text-white shadow-xl shadow-emerald-100",children:"R"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl leading-none font-black tracking-tighter",children:["RAMZAN",e.jsx("span",{className:"text-emerald-600",children:"IA"})]}),e.jsx("p",{className:"mt-0.5 text-[9px] font-bold tracking-widest text-slate-400 uppercase",children:"Community First"})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:t?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"hidden text-right sm:block",children:[e.jsx("p",{className:"text-xs font-black text-slate-900",children:t.name}),e.jsx("p",{className:"text-[10px] font-bold text-emerald-600 uppercase",children:t.role})]}),e.jsx("button",{onClick:s,className:"flex h-10 w-10 items-center justify-center rounded-2xl border border-slate-200 bg-slate-50 text-slate-400 transition-all hover:text-red-500","aria-label":"Logout",children:e.jsx(q,{size:18})})]}):e.jsxs("button",{onClick:a,className:"flex items-center justify-center gap-2 rounded-2xl bg-emerald-600 px-5 py-2 text-sm font-bold text-white shadow-lg shadow-emerald-100 transition-all hover:bg-emerald-700 active:scale-95",children:[e.jsx(T,{size:16}),"Join"]})})]})})}const $=[{id:"home",label:"Home",icon:F},{id:"duas",label:"Duas",icon:G},{id:"events",label:"Events",icon:_}];function ee({activeView:t,onViewChange:s}){return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:"fixed bottom-0 z-50 flex w-full items-center justify-around border-t border-slate-100 bg-white px-6 py-3 pb-6 shadow-[0_-10px_30px_rgba(0,0,0,0.03)] sm:hidden",children:$.map(a=>e.jsxs("button",{onClick:()=>s(a.id),className:`flex flex-col items-center gap-1 rounded-xl px-4 py-2 transition-all ${t===a.id?"bg-emerald-50 text-emerald-600":"text-slate-400 hover:text-slate-600"}`,"aria-label":a.label,children:[e.jsx(a.icon,{size:20}),e.jsx("span",{className:"text-[10px] font-bold",children:a.label})]},a.id))}),e.jsx("div",{className:"fixed bottom-6 left-1/2 z-50 hidden -translate-x-1/2 sm:block",children:e.jsx("div",{className:"flex gap-1 rounded-2xl bg-slate-950 p-1.5 text-white shadow-2xl shadow-slate-950/20",children:$.map(a=>e.jsx("button",{onClick:()=>s(a.id),className:`rounded-xl px-6 py-2.5 text-[10px] font-black tracking-wider uppercase transition-all ${t===a.id?"bg-emerald-600 text-white":"text-slate-400 hover:text-white"}`,children:a.label},a.id))})})]})}function te({time:t,compact:s=!1}){return e.jsxs("div",{className:`group relative overflow-hidden border-none bg-emerald-600 text-white shadow-sm transition-all duration-300 hover:shadow-lg hover:shadow-emerald-200/40 ${s?"rounded-2xl p-4":"rounded-[2.5rem] p-6"}`,children:[e.jsx(H,{size:s?60:100,className:"absolute -top-4 -right-4 text-emerald-500/30 transition-transform duration-500 group-hover:scale-110"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("span",{className:`block font-black tracking-wider text-emerald-200 uppercase ${s?"mb-1 text-[8px]":"mb-8 text-[10px]"}`,children:"Imsak (Sehar)"}),e.jsx("h4",{className:`font-black tracking-tight ${s?"text-3xl":"text-5xl"}`,children:t}),!s&&e.jsx("p",{className:"mt-1 text-sm font-medium text-emerald-100/80",children:"Stop eating and intend to fast."})]})]})}function se({time:t,compact:s=!1}){return e.jsxs("div",{className:`group relative overflow-hidden border-none bg-slate-950 text-white shadow-sm transition-all duration-300 hover:shadow-lg hover:shadow-slate-200/40 ${s?"rounded-2xl p-4":"rounded-[2.5rem] p-6"}`,children:[e.jsx(U,{size:s?60:100,className:"absolute -top-4 -right-4 text-slate-800/50 transition-transform duration-500 group-hover:rotate-12"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("span",{className:`block font-black tracking-wider text-slate-400 uppercase ${s?"mb-1 text-[8px]":"mb-8 text-[10px]"}`,children:"Maghrib (Iftar)"}),e.jsx("h4",{className:`font-black tracking-tight ${s?"text-3xl":"text-5xl"}`,children:t}),!s&&e.jsx("p",{className:"mt-1 text-sm font-medium text-slate-400/80",children:"Break your fast with the sun's set."})]})]})}function ae({timings:t,compact:s=!1}){return e.jsxs("div",{className:`grid grid-cols-2 ${s?"gap-3":"gap-4"}`,children:[e.jsx(te,{time:t.sehar,compact:s}),e.jsx(se,{time:t.iftar,compact:s})]})}function le({point:t,onBook:s,compact:a=!1}){return e.jsxs("div",{className:`flex flex-col border border-t-4 border-slate-100 border-t-emerald-500 bg-white shadow-sm transition-all duration-300 hover:shadow-lg hover:shadow-slate-200/40 ${a?"rounded-2xl p-4":"rounded-[2.5rem] p-6"}`,children:[e.jsxs("div",{className:`flex items-start justify-between ${a?"mb-3":"mb-6"}`,children:[e.jsx("h3",{className:`leading-tight font-black text-slate-900 ${a?"text-base":"text-xl"}`,children:t.name}),e.jsx("span",{className:`rounded-lg font-black uppercase ${a?"px-1.5 py-0.5 text-[8px]":"rounded-xl px-2 py-1 text-[9px]"} ${t.price===0?"bg-emerald-50 text-emerald-600":"bg-slate-100 text-slate-600"}`,children:t.price===0?"Free":`₹${t.price}`})]}),e.jsxs("div",{className:`flex-1 bg-slate-50 text-slate-600 italic ${a?"mb-3 rounded-xl p-3 text-xs leading-relaxed":"mb-6 rounded-2xl p-4 text-sm leading-relaxed"}`,children:['"',t.menu,'"']}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>window.open(`tel:${t.phone}`),className:`flex items-center justify-center gap-1.5 rounded-xl border border-slate-200 bg-white font-bold text-slate-700 transition-all hover:bg-slate-50 active:scale-95 ${a?"px-3 py-2 text-xs":"px-6 py-3.5 text-sm"}`,children:[e.jsx(V,{size:a?12:16})," Call"]}),e.jsxs("button",{onClick:()=>window.open(`https://wa.me/${t.phone.replace(/\D/g,"")}`),className:`flex items-center justify-center gap-1.5 rounded-xl border border-emerald-100 bg-white font-bold text-emerald-600 transition-all hover:bg-emerald-50 active:scale-95 ${a?"px-3 py-2 text-xs":"px-6 py-3.5 text-sm"}`,children:[e.jsx(J,{size:a?12:16})," Chat"]})]}),e.jsx("button",{onClick:()=>s(t),disabled:!t.isBookable,className:`flex w-full items-center justify-center gap-2 rounded-xl bg-emerald-600 font-bold text-white shadow-lg shadow-emerald-100 transition-all hover:bg-emerald-700 active:scale-95 disabled:bg-emerald-300 disabled:opacity-50 ${a?"px-3 py-2 text-xs":"px-6 py-3.5 text-sm"}`,children:t.isBookable?"Confirm Spot":"Info Only"})]})]})}function ne({dua:t}){return e.jsxs("div",{className:"space-y-6 rounded-[2.5rem] border border-slate-100 bg-white p-10 shadow-sm transition-all duration-500 hover:shadow-xl hover:shadow-slate-200/40",children:[e.jsx("h4",{className:"text-[10px] font-black tracking-widest text-emerald-600 uppercase",children:t.title}),e.jsx("p",{className:"text-right text-4xl leading-[1.8] font-bold text-slate-900",dir:"rtl",children:t.arabic}),e.jsxs("div",{className:"space-y-2 border-t border-slate-50 pt-6",children:[e.jsxs("p",{className:"text-sm font-bold text-emerald-700 italic",children:['"',t.transliteration,'"']}),e.jsx("p",{className:"text-sm font-medium text-slate-400",children:t.english})]})]})}function re({event:t,onInterested:s}){return e.jsxs("div",{className:"flex flex-col justify-between gap-6 rounded-[2.5rem] border border-slate-100 bg-white p-6 shadow-sm transition-all duration-500 hover:shadow-xl hover:shadow-emerald-100/30 md:flex-row md:items-center",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"rounded-full bg-emerald-50 px-3 py-1 text-[10px] font-black text-emerald-600 uppercase",children:t.date}),e.jsx("span",{className:"rounded-full bg-slate-50 px-3 py-1 text-[10px] font-black text-slate-400 uppercase",children:t.time})]}),e.jsx("h3",{className:"text-2xl font-black text-slate-900",children:t.title}),e.jsxs("p",{className:"text-sm font-medium text-slate-400",children:[e.jsx(A,{size:12,className:"mr-1 inline"})," ",t.location," • ",e.jsx(K,{size:12,className:"mr-1 inline"})," ",t.speaker]})]}),e.jsx("button",{onClick:()=>s==null?void 0:s(t),className:"flex items-center justify-center gap-2 rounded-2xl bg-slate-900 px-6 py-3.5 text-sm font-bold text-white transition-all hover:bg-slate-800 active:scale-95",children:"Interested"})]})}const S=t=>new Promise(s=>setTimeout(s,t)),ie=async()=>(await S(300),[{id:1,name:"Masjid-e-Noor",area:"T. Nagar",lat:13.0405,lng:80.2337,slots:25,menu:"Mutton Kanji, Dates & Fruit Salad",phone:"+919000000001",timing:"3:30 AM - 4:15 AM",price:0,isBookable:!0,type:"Sehar"},{id:2,name:"Triplicane Big Masjid",area:"Triplicane",lat:13.0601,lng:80.2747,slots:150,menu:"Beef Kanji & Tea",phone:"+919000000002",timing:"6:35 PM (Iftar)",price:0,isBookable:!1,type:"Iftar"},{id:3,name:"Ambur Private Kitchen",area:"Mount Road",lat:13.0645,lng:80.2594,slots:40,menu:"Biryani & Lemon Juice",phone:"+919000000003",timing:"3:15 AM - 4:00 AM",price:120,isBookable:!0,type:"Sehar"}]),oe=async()=>(await S(200),[{id:1,title:"Dua for Suhoor",arabic:"وَبِصَوْمِ غَدٍ نَّوَيْتُ مِنْ شَهْرِ رَمَضَانَ",transliteration:"Wa bi-sawmi ghadinn nawaitu min shahri ramadan",english:"I intend to keep the fast for tomorrow in the month of Ramadan."},{id:2,title:"Dua for Iftar",arabic:"اللَّهُمَّ إِنِّي لَكَ صُمْتُ وَبِكَ آمَنْتُ وَعَلَيْكَ تَوَكَّلْتُ وَعَلَى رِزْقِكَ أَفْطَرْتُ",transliteration:"Allahumma inni laka sumtu, wa bika aamantu, wa 'alayka tawakkaltu, wa 'ala rizqika aftartu",english:"O Allah! I fasted for You and I believe in You and I put my trust in You and I break my fast with Your sustenance."}]),ce=async()=>(await S(200),[{id:1,title:"Ramzan Lecture Series",location:"Anna Nagar Masjid",date:"Feb 15, 2026",time:"10:30 PM",speaker:"Shaykh Abdullah",description:"A series on the virtues of the last 10 days."},{id:2,title:"Community Iftar Meet",location:"Marina Beach",date:"Feb 12, 2026",time:"6:00 PM",speaker:"Open Event",description:"Bachelors meet-up for a shared Iftar experience."}]),de=async(t="Chennai")=>(await S(100),{sehar:"4:52 AM",iftar:"6:24 PM",area:t}),xe=async(t,s)=>(await S(1e3),{success:!0,user:{email:t,role:t.includes("admin")?"admin":"seeker",name:t.split("@")[0],token:"token-"+Date.now()}}),me=async(t,s)=>(await S(500),{success:!0,bookingId:`BK-${Date.now()}`,message:"Spot booked successfully!"}),I={fetchPoints:ie,fetchDuas:oe,fetchEvents:ce,fetchTimings:de,login:xe,bookSpot:me};function ue({onClose:t,onSuccess:s}){const[a,n]=l.useState("CHOICE"),[d,m]=l.useState(""),[b,i]=l.useState(""),[g,o]=l.useState("seeker"),[h,u]=l.useState(!1),[c,N]=l.useState(["","","","","",""]),w=l.useRef([]),r=async p=>{p.preventDefault(),u(!0),await I.login(d,b),u(!1),n("OTP")},x=(p,j)=>{const f=p.target.value;if(isNaN(f))return;const R=[...c];R[j]=f.slice(-1),N(R),f&&j<5&&w.current[j+1].focus()},k=(p,j)=>{p.key==="Backspace"&&!c[j]&&j>0&&w.current[j-1].focus()},C=()=>{c.join("").length===6&&s({email:d,name:d.split("@")[0],role:g})},v="w-full rounded-2xl border-none bg-slate-50 px-6 py-4 font-bold outline-none focus:ring-2 focus:ring-emerald-500",y="flex w-full items-center justify-center gap-2 rounded-2xl bg-emerald-600 px-6 py-3.5 text-sm font-bold text-white shadow-lg shadow-emerald-100 transition-all hover:bg-emerald-700 active:scale-95 disabled:opacity-50",M={CHOICE:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-3xl font-black tracking-tight text-slate-900",children:"Join Ramzania."}),e.jsx("p",{className:"mb-8 text-sm leading-relaxed font-medium text-slate-500",children:"Your portal to Chennai's community Sehar & Iftar."}),e.jsx("button",{className:y,onClick:()=>n("LOGIN"),children:"Sign In"}),e.jsx("button",{className:"flex w-full items-center justify-center gap-2 rounded-2xl border border-slate-200 bg-white px-6 py-3.5 text-sm font-bold text-slate-700 transition-all hover:bg-slate-50 active:scale-95",onClick:()=>n("REGISTER"),children:"Create Account"})]}),LOGIN:e.jsxs("form",{onSubmit:r,className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>n("CHOICE"),className:"-ml-2 p-2 text-slate-400",children:e.jsx(O,{size:20})}),e.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Sign In"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{required:!0,type:"email",placeholder:"Email address",className:v,value:d,onChange:p=>m(p.target.value)}),e.jsx("input",{required:!0,type:"password",placeholder:"Password",className:v,value:b,onChange:p=>i(p.target.value)})]}),e.jsx("button",{type:"submit",disabled:h,className:y,children:h?e.jsx(L,{className:"animate-spin",size:20}):"Continue"}),e.jsx("button",{type:"button",onClick:()=>n("FORGOT"),className:"mt-4 w-full text-center text-[10px] font-black tracking-widest text-slate-300 uppercase",children:"Forgot Password?"})]}),REGISTER:e.jsxs("form",{onSubmit:r,className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>n("CHOICE"),className:"-ml-2 p-2 text-slate-400",children:e.jsx(O,{size:20})}),e.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Register"})]}),e.jsxs("div",{className:"flex rounded-2xl bg-slate-100 p-1",children:[e.jsx("button",{type:"button",onClick:()=>o("seeker"),className:`flex-1 rounded-xl py-3 text-xs font-bold transition-all ${g==="seeker"?"bg-white text-emerald-600 shadow-sm":"text-slate-500"}`,children:"Seeker"}),e.jsx("button",{type:"button",onClick:()=>o("admin"),className:`flex-1 rounded-xl py-3 text-xs font-bold transition-all ${g==="admin"?"bg-white text-emerald-600 shadow-sm":"text-slate-500"}`,children:"Provider"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{required:!0,type:"email",placeholder:"Email address",className:v,value:d,onChange:p=>m(p.target.value)}),e.jsx("input",{required:!0,type:"password",placeholder:"Set Password",className:v,value:b,onChange:p=>i(p.target.value)})]}),e.jsx("button",{type:"submit",disabled:h,className:y,children:"Create Account"})]}),FORGOT:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>n("LOGIN"),className:"-ml-2 p-2 text-slate-400",children:e.jsx(O,{size:20})}),e.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Recovery"})]}),e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Enter your email to receive a reset link."}),e.jsx("input",{required:!0,type:"email",placeholder:"Registered Email",className:v,value:d,onChange:p=>m(p.target.value)}),e.jsx("button",{className:y,onClick:()=>n("CHOICE"),children:"Send Reset Link"})]}),OTP:e.jsxs("div",{className:"space-y-8 text-center",children:[e.jsxs("div",{className:"space-y-2 text-left",children:[e.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Verify Identity"}),e.jsxs("p",{className:"text-sm font-medium text-slate-500",children:["Check your inbox at ",d]})]}),e.jsx("div",{className:"flex justify-between gap-2",children:c.map((p,j)=>e.jsx("input",{ref:f=>w.current[j]=f,type:"text",maxLength:"1",className:"h-14 w-full rounded-xl border-none bg-slate-50 text-center text-xl font-bold outline-none focus:ring-2 focus:ring-emerald-500",value:p,onKeyDown:f=>k(f,j),onChange:f=>x(f,j)},j))}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{className:y,onClick:C,disabled:c.join("").length<6,children:"Complete Login"}),e.jsx("button",{onClick:()=>n("LOGIN"),className:"text-[10px] font-black tracking-widest text-slate-300 uppercase",children:"Resend Code"})]})]})};return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-end justify-center bg-slate-900/40 p-4 backdrop-blur-sm sm:items-center",children:e.jsxs("div",{className:"animate-in slide-in-from-bottom-10 w-full max-w-md rounded-[2.5rem] border border-slate-100 bg-white p-8 shadow-sm",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-emerald-50 text-emerald-600",children:e.jsx(T,{size:24})}),e.jsx("button",{onClick:t,className:"rounded-full p-2 text-slate-300 transition-all hover:bg-slate-100",children:e.jsx(D,{size:20})})]}),M[a]]})})}function he({point:t,onClose:s,onSuccess:a}){const[n,d]=l.useState(!1),[m,b]=l.useState({name:"",email:"",phone:"",persons:1}),i=h=>{const{name:u,value:c}=h.target;b(N=>({...N,[u]:c}))},g=async h=>{h.preventDefault(),d(!0),await new Promise(u=>setTimeout(u,500)),d(!1),a(`Spot booked at ${t.name}!`)},o="w-full rounded-2xl border-none bg-slate-50 px-6 py-4 font-bold outline-none focus:ring-2 focus:ring-emerald-500";return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-end justify-center bg-slate-900/30 p-4 backdrop-blur-sm sm:items-center",children:e.jsxs("div",{className:"animate-in slide-in-from-bottom-10 w-full max-w-md rounded-[2.5rem] border border-slate-100 bg-white p-8 shadow-sm",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("h2",{className:"text-3xl font-black tracking-tight text-slate-900",children:["Book ",e.jsx("span",{className:"text-emerald-600",children:"Spot"})]}),e.jsx("button",{onClick:s,className:"rounded-full p-2 text-slate-400 hover:bg-slate-50",children:e.jsx(D,{size:20})})]}),e.jsxs("div",{className:"mb-6 rounded-2xl bg-emerald-50 p-4",children:[e.jsx("p",{className:"text-sm font-black text-emerald-800",children:t.name}),e.jsxs("p",{className:"text-xs text-emerald-600",children:[t.area," • ",t.timing]})]}),e.jsxs("form",{className:"space-y-4",onSubmit:g,children:[e.jsx("input",{required:!0,type:"text",name:"name",placeholder:"Full Name",className:o,value:m.name,onChange:i}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{required:!0,type:"email",name:"email",placeholder:"Email",className:o,value:m.email,onChange:i}),e.jsx("input",{required:!0,type:"tel",name:"phone",placeholder:"Mobile",className:o,value:m.phone,onChange:i})]}),e.jsx("input",{required:!0,type:"number",name:"persons",placeholder:"No. of Persons",min:"1",max:"5",className:o,value:m.persons,onChange:i}),e.jsx("button",{type:"submit",disabled:n,className:"mt-4 flex w-full items-center justify-center gap-2 rounded-2xl bg-emerald-600 px-6 py-3.5 text-sm font-bold text-white shadow-lg shadow-emerald-100 transition-all hover:bg-emerald-700 active:scale-95 disabled:opacity-50",children:n?e.jsx(L,{className:"animate-spin",size:20}):"Confirm Reservation"})]})]})})}function pe({onRequestLocation:t,isLocating:s,error:a}){return e.jsx("div",{className:"rounded-[2rem] border-2 border-dashed border-emerald-200 bg-emerald-50/50 p-6",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 text-center sm:flex-row sm:text-left",children:[e.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-2xl bg-emerald-100 text-emerald-600",children:s?e.jsx(L,{size:24,className:"animate-spin"}):e.jsx(A,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Enable Location"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:a?"Location access denied. Please enable it in your browser settings.":"Allow location access to find food points and events near you."})]}),e.jsx("button",{onClick:t,disabled:s,className:"flex items-center justify-center gap-2 rounded-2xl bg-emerald-600 px-6 py-3 text-sm font-bold text-white shadow-lg shadow-emerald-100 transition-all hover:bg-emerald-700 active:scale-95 disabled:opacity-50",children:s?e.jsxs(e.Fragment,{children:[e.jsx(L,{size:16,className:"animate-spin"}),"Locating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{size:16}),"Allow Access"]})})]})})}function B({timings:t,points:s,location:a,address:n,isLocating:d,locationError:m,permissionStatus:b,onRequestLocation:i,onBook:g}){const[o,h]=l.useState(""),u=s.filter(c=>c.name.toLowerCase().includes(o.toLowerCase())||c.menu.toLowerCase().includes(o.toLowerCase()));return b!=="granted"&&!a?e.jsx(pe,{permissionStatus:b,isLocating:d,locationError:m,onRequestLocation:i}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-emerald-100",children:d?e.jsx(L,{size:14,className:"animate-spin text-emerald-600"}):e.jsx(A,{size:14,className:"text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-slate-500",children:"Current Location"}),e.jsx("p",{className:"text-sm font-bold text-slate-900",children:d?"Locating...":(n==null?void 0:n.city)||(n==null?void 0:n.formatted)||"Location Set"})]})]}),e.jsx("button",{onClick:i,className:"rounded-xl bg-emerald-50 px-3 py-1.5 text-xs font-bold text-emerald-600 transition-colors hover:bg-emerald-100",children:"Update"})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"mb-3 text-sm font-black tracking-tight text-slate-900",children:"Today's Timings"}),e.jsx(ae,{timings:t,compact:!0})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{size:16,className:"text-emerald-600"}),e.jsx("h2",{className:"text-sm font-black tracking-tight text-slate-900",children:"Food Points"})]}),e.jsxs("span",{className:"rounded-lg bg-slate-100 px-2 py-0.5 text-xs font-bold text-slate-600",children:[u.length," nearby"]})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(W,{size:16,className:"absolute top-1/2 left-3 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search food points...",value:o,onChange:c=>h(c.target.value),className:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pr-4 pl-9 text-sm font-medium text-slate-900 placeholder:text-slate-400 focus:border-emerald-300 focus:ring-2 focus:ring-emerald-100 focus:outline-none"})]}),u.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:u.map(c=>e.jsx(le,{point:c,onBook:g,compact:!0},c.id))}):e.jsxs("div",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50 py-8 text-center",children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"No food points found"}),e.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"Try a different search term"})]})]})]})}function fe({duas:t}){return e.jsxs("div",{className:"space-y-12",children:[e.jsxs("h2",{className:"text-5xl font-black tracking-tighter text-slate-950 md:text-7xl",children:["Daily ",e.jsx("span",{className:"text-emerald-600",children:"Duas."})]}),e.jsx("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2",children:t.map(s=>e.jsx(ne,{dua:s},s.id))}),t.length===0&&e.jsx("div",{className:"py-12 text-center",children:e.jsx("p",{className:"text-lg font-bold text-slate-400",children:"No duas available"})})]})}function be({events:t,onInterested:s}){return e.jsxs("div",{className:"space-y-12",children:[e.jsxs("h2",{className:"text-5xl font-black tracking-tighter text-slate-950 md:text-7xl",children:["Community ",e.jsx("span",{className:"text-emerald-600",children:"Events."})]}),e.jsx("div",{className:"space-y-4",children:t.map(a=>e.jsx(re,{event:a,onInterested:s},a.id))}),t.length===0&&e.jsxs("div",{className:"py-12 text-center",children:[e.jsx("p",{className:"text-lg font-bold text-slate-400",children:"No events scheduled"}),e.jsx("p",{className:"text-sm text-slate-300",children:"Check back later for upcoming events"})]})]})}function ge({message:t,onClose:s}){return t?e.jsxs("div",{className:"animate-in fade-in slide-in-from-top-10 fixed top-8 left-1/2 z-[200] flex -translate-x-1/2 items-center gap-3 rounded-full bg-slate-950 px-8 py-4 text-white shadow-2xl",children:[e.jsx(X,{className:"text-emerald-400",size:18}),e.jsx("span",{className:"text-sm font-black tracking-tight",children:t}),e.jsx("button",{onClick:s,className:"text-slate-500 transition-colors hover:text-white",children:e.jsx(D,{size:16})})]}):null}const z="ramzania_user_location";async function je(t,s){try{const n=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${t}&lon=${s}&zoom=14&addressdetails=1`,{headers:{"Accept-Language":"en"}})).json();if(n&&n.address){const{suburb:d,neighbourhood:m,city:b,town:i,village:g,state_district:o,state:h,country:u}=n.address;return{raw:n,area:d||m||b||i||g||o||""||"Unknown Area",fullAddress:n.display_name||"",city:b||i||g||o||"",state:h||"",country:u||"",addressDetails:n.address}}return null}catch(a){return console.error("Reverse geocoding failed:",a),null}}function Ne(){const[t,s]=l.useState(null),[a,n]=l.useState(null),[d,m]=l.useState(!1),[b,i]=l.useState(null),[g,o]=l.useState("prompt");l.useEffect(()=>{navigator.permissions&&navigator.permissions.query({name:"geolocation"}).then(r=>{o(r.state),r.onchange=()=>{o(r.state)}})},[]),l.useEffect(()=>{const r=localStorage.getItem(z);if(r)try{const x=JSON.parse(r);x.lat&&x.lng&&s({lat:x.lat,lng:x.lng}),x.address&&n(x.address)}catch{localStorage.removeItem(z)}},[]),l.useEffect(()=>{g==="granted"&&!t&&u()},[g]);const h=l.useCallback((r,x)=>{s(r),n(x),localStorage.setItem(z,JSON.stringify({lat:r.lat,lng:r.lng,address:x,timestamp:Date.now()}))},[]),u=l.useCallback(async()=>{if(!navigator.geolocation){i("Geolocation is not supported");return}m(!0),i(null),navigator.geolocation.getCurrentPosition(async r=>{const x={lat:r.coords.latitude,lng:r.coords.longitude},k=await je(x.lat,x.lng);h(x,k),m(!1)},r=>{r.code===r.PERMISSION_DENIED?(i("Location permission denied"),o("denied")):r.code===r.POSITION_UNAVAILABLE?i("Location unavailable"):r.code===r.TIMEOUT?i("Location request timed out"):i("Enable GPS to see distance"),m(!1)},{timeout:1e4,enableHighAccuracy:!0})},[h]),c=l.useCallback(()=>{u()},[u]),N=l.useCallback((r,x)=>{if(!t)return null;const k=6371,C=(r-t.lat)*Math.PI/180,v=(x-t.lng)*Math.PI/180,y=Math.sin(C/2)*Math.sin(C/2)+Math.cos(t.lat*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(v/2)*Math.sin(v/2),E=2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y));return k*E},[t]),w=l.useCallback(()=>{s(null),n(null),localStorage.removeItem(z)},[]);return{location:t,address:a,isLocating:d,error:b,permissionStatus:g,requestLocation:c,calculateDistance:N,clearLocation:w}}function ve(){const[t,s]=l.useState([]),[a,n]=l.useState([]),[d,m]=l.useState([]),[b,i]=l.useState({sehar:"04:52 AM",iftar:"06:24 PM",area:"Chennai"}),[g,o]=l.useState(!0),[h,u]=l.useState(null),c=l.useCallback(async()=>{o(!0),u(null);try{const[N,w,r,x]=await Promise.all([I.fetchPoints(),I.fetchDuas(),I.fetchEvents(),I.fetchTimings()]);s(N),n(w),m(r),i(x)}catch(N){u(N.message||"Failed to fetch data")}finally{o(!1)}},[]);return l.useEffect(()=>{c()},[c]),{points:t,duas:a,events:d,timings:b,loading:g,error:h,refetch:c}}const P="ramzania_user";function Ce(){const[t,s]=l.useState(null),[a,n]=l.useState(!1),[d,m]=l.useState("home"),[b,i]=l.useState(null),[g,o]=l.useState(null),{points:h,duas:u,events:c,timings:N}=ve(),{location:w,address:r,isLocating:x,error:k,permissionStatus:C,requestLocation:v}=Ne();l.useEffect(()=>{const f=localStorage.getItem(P);f&&s(JSON.parse(f))},[]);const y=f=>{s(f),localStorage.setItem(P,JSON.stringify(f)),n(!1)},E=()=>{localStorage.removeItem(P),s(null),m("home")},M=f=>{o(f),i(null)},p=f=>{o(`Marked interest for ${f.title}`)},j=()=>{switch(d){case"home":return e.jsx(B,{timings:N,points:h,location:w,address:r,isLocating:x,locationError:k,permissionStatus:C,onRequestLocation:v,onBook:i});case"duas":return e.jsx(fe,{duas:u});case"events":return e.jsx(be,{events:c,onInterested:p});default:return e.jsx(B,{timings:N,points:h,location:w,address:r,isLocating:x,locationError:k,permissionStatus:C,onRequestLocation:v,onBook:i})}};return e.jsxs("div",{className:"min-h-screen bg-white pb-20 font-sans text-slate-900 selection:bg-emerald-100 sm:pb-16",children:[e.jsx(Z,{user:t,onLogout:E,onJoinClick:()=>n(!0)}),e.jsx("main",{className:"mx-auto max-w-lg px-4 py-6 sm:max-w-2xl sm:px-6 sm:py-8",children:j()}),e.jsx(ee,{activeView:d,onViewChange:m}),a&&e.jsx(ue,{onClose:()=>n(!1),onSuccess:y}),b&&e.jsx(he,{point:b,onClose:()=>i(null),onSuccess:M}),e.jsx(ge,{message:g,onClose:()=>o(null)})]})}export{Ce as default};
